(function(t){function e(e){for(var i,o,c=e[0],s=e[1],u=e[2],l=0,f=[];l<c.length;l++)o=c[l],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&f.push(r[o][0]),r[o]=0;for(i in s)Object.prototype.hasOwnProperty.call(s,i)&&(t[i]=s[i]);d&&d(e);while(f.length)f.shift()();return a.push.apply(a,u||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],i=!0,c=1;c<n.length;c++){var s=n[c];0!==r[s]&&(i=!1)}i&&(a.splice(e--,1),t=o(o.s=n[0]))}return t}var i={},r={app:0},a=[];function o(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=i,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(n,i,function(e){return t[e]}.bind(null,i));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],s=c.push.bind(c);c.push=e,c=c.slice();for(var u=0;u<c.length;u++)e(c[u]);var d=s;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("cd49")},"5c0b":function(t,e,n){"use strict";n("9c0c")},"7c31":function(t,e,n){},"837e":function(t,e,n){"use strict";n("7c31")},"9c0c":function(t,e,n){},cd49:function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("2b0e"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",[n("v-main",[t.pianoLoaded?n("v-container",[this.practiceState.giveUp?n("v-row",[n("v-col",[n("h2",[t._v(t._s(t.currentCardDescription))])])],1):t._e(),0==this.selectedFlashcardIds.length?n("v-row",[n("v-col",{staticClass:"md-12"},[n("h2",[t._v("No Flashcards Selected")])])],1):t.pianoLoaded?n("v-row",[n("v-col",{staticClass:"md-2"},[n("v-btn",{on:{click:t.drawCard}},[t._v("Draw Card")])],1),n("v-col",{staticClass:"md-2"},[n("v-btn",{on:{click:t.giveUp}},[t._v("Give Up")])],1),n("v-col",{staticClass:"md-2"},[n("v-btn",{on:{click:t.playCard}},[t._v("Play Card")])],1),n("v-col",{staticClass:"md-2"},[n("v-btn",{on:{click:function(e){return t.recordResult(!0)}}},[t._v("Succeed")])],1),n("v-col",{staticClass:"md-2"},[n("v-btn",{on:{click:function(e){return t.recordResult(!1)}}},[t._v("Fail")])],1)],1):n("v-row",[n("v-btn",{on:{click:t.loadPiano}},[n("h1",[t._v("Load Piano")])])],1)],1):n("v-container",[n("v-row",[n("v-col",{staticClass:"lg-4"}),n("v-col",{staticClass:"lg-4"},[n("v-btn",{on:{click:t.loadAll}},[t._v("Proceed Irreversibly")])],1),n("v-col",{staticClass:"lg-4"})],1),n("v-row",[n("v-col",{staticClass:"lg-6"},[n("options-editor",{model:{value:t.options,callback:function(e){t.options=e},expression:"options"}})],1),n("v-col",{staticClass:"lg-6"},[n("flashcardSelector",{attrs:{categories:t.categories},model:{value:t.selectedFlashcardIds,callback:function(e){t.selectedFlashcardIds=e},expression:"selectedFlashcardIds"}})],1)],1)],1)],1)],1)},a=[],o=(n("4160"),n("d81d"),n("b0c0"),n("4ec9"),n("d3b7"),n("3ca3"),n("159b"),n("ddb0"),n("96cf"),n("1da1")),c=n("d4ec"),s=n("bee2"),u=n("262e"),d=n("2caf"),l=n("9ab4"),f=n("1b40"),h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",[n("v-row",[n("v-col",{staticClass:"lg-6"},[n("v-treeview",{attrs:{"open-all":"",selectable:"",dense:"",items:t.categories,"item-children":"children","item-key":"id","item-text":"name"},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})],1),n("v-col",{staticClass:"lg-6"})],1)],1)},p=[],v=n("eb2a"),g=n("a523"),m=n("0fd9"),y=n("62ad"),b=function(t){Object(u["a"])(n,t);var e=Object(d["a"])(n);function n(){var t;return Object(c["a"])(this,n),t=e.apply(this,arguments),t.selected=[],t}return Object(s["a"])(n,[{key:"newSelection",value:function(t,e){this.emitSelected(t)}},{key:"emitSelected",value:function(t){}}]),n}(f["d"]);Object(l["a"])([Object(f["c"])()],b.prototype,"categories",void 0),Object(l["a"])([Object(f["e"])("selected",{immediate:!0,deep:!0})],b.prototype,"newSelection",null),Object(l["a"])([Object(f["b"])("input")],b.prototype,"emitSelected",null),b=Object(l["a"])([Object(f["a"])({components:{VTreeview:v["a"],VContainer:g["a"],VRow:m["a"],VCol:y["a"]}})],b);var w=b,_=w,R=(n("837e"),n("2877")),k=Object(R["a"])(_,h,p,!1,null,"014bcfce",null),C=k.exports,j=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("vue-json-editor",{attrs:{expandedOnStart:!0},on:{"json-change":t.onJsonChange},model:{value:t.options,callback:function(e){t.options=e},expression:"options"}})],1)},I=[],O=n("5530"),x=n("b974"),S=n("ac7c"),E=n("8654"),V=n("8336"),T=(n("25f0"),n("5e54"));n("6062");function M(t,e){var n=[];return t.forEach((function(t){e(t).forEach((function(t){return n.push(t)}))})),n}function F(t,e){return Math.floor(Math.random()*(e-t+1)+t)}function P(t){return t[F(0,t.length-1)]}function A(t,e,n){var i=[];if("allow-repeats"==n)for(var r=0;r<e;r++)i.push(P(t));else if("no-repeats"==n){if(e>t.length)throw new Error("can't randomly sample "+e.toString()+" items with no repeats from a list with "+t.length.toString()+" elements.");var a=new Set,o=F(0,t.length-1);while(i.length<e){while(a.has(o))o=F(0,t.length-1);i.push(t[o]),a.add(o)}}else if("non-sequential-repeats"==n){var c=F(0,t.length-1),s=c;while(i.length<e){while(c==s)s=F(0,t.length-1);i.push(t[s]),c=s}}return i}function N(t){for(var e=t.length-1;e>0;e--){var n=Math.floor(Math.random()*(e+1)),i=[t[n],t[e]];t[e]=i[0],t[n]=i[1]}}function U(t,e){for(var n=[],i=0;i<e;i++)n.push(t());return n}function D(t,e){var n=new Map;return t.forEach((function(t){return n.set(e(t),t)})),n}function B(t,e){return{kind:"solfege",solfege:t,tonic:e}}function L(t,e){return{kind:"scientific",class:t,octave:e}}function q(t){return{kind:"midi",midi:t}}var z=["A","Bb","B","C","Db","D","Eb","E","F","F#","G","Ab"];M([1,2,3,4,5,6,7,8],(function(t){return z.map((function(e){return e+t.toString()}))}));function G(t){return"midi"==t.kind?t.midi:"scientific"==t.kind?Object(T["a"])(t.class+t.octave.toString()).toMidi():J(t.solfege.solfege)+12*t.solfege.octaveOffset+G(t.tonic)}function J(t){return"do"==t?0:"ra"==t?1:"re"==t?2:"ri"==t||"me"==t?3:"mi"==t?4:"fa"==t?5:"fi"==t||"se"==t?6:"so"==t?7:"si"==t||"le"==t?8:"la"==t?9:"li"==t||"te"==t?10:"ti"==t?11:-1}function Y(t){if(-1==J(t))throw console.log("Not valid solfege: "+t),new Error("Invalid solfege: "+t);return t}function $(t){var e=-1,n=0,i=[];return t.forEach((function(t){var r,a=null!==(r=J(t))&&void 0!==r?r:0;while(a+12*n<=e)n++;var o=a+12*n;e=o,i.push({solfege:t,octaveOffset:n})})),i}var H={play:{drone:!1,referenceNote:L("A",3),playReference:!0,bpm:60},priorities:{percentNew:50,byPercentiles:[65,35]},derivation:{lowestNote:L("F#",2),highestNote:L("D",5),tonality:{kind:"tonal",tonic:"A"},chunkSize:1,chunkType:"sequence",repeats:"non-sequential-repeats",cards:20,apreggiateChords:!1},commands:{giveUp:L("Ab",7),replay:L("F#",7),nextCard:L("Bb",7)}},K=n("45a3"),Q=function(t){Object(u["a"])(n,t);var e=Object(d["a"])(n);function n(){var t;return Object(c["a"])(this,n),t=e.apply(this,arguments),t.options=Object(O["a"])(Object(O["a"])({},H),{},{priorities:Object(O["a"])({},H.priorities)}),t}return Object(s["a"])(n,[{key:"onJsonChange",value:function(t){this.options=t,this.emit()}},{key:"emit",value:function(){return this.options}}]),n}(f["d"]);Object(l["a"])([Object(f["b"])("input")],Q.prototype,"emit",null),Q=Object(l["a"])([Object(f["a"])({components:{VContainer:g["a"],VRow:m["a"],VCol:y["a"],VSelect:x["a"],VCheckbox:S["a"],VTextField:E["a"],VBtn:V["a"],vueJsonEditor:K["a"]}})],Q);var W=Q,X=W,Z=Object(R["a"])(X,j,I,!1,null,null,null),tt=Z.exports,et=n("7496"),nt=n("f6c4"),it=n("fe57"),rt=n("71a3"),at=n("c671"),ot=(n("99af"),[{function:"I",inv:"R 3 5",category:"triads.diatonic.major.R35",notes:"do mi so"},{function:"ii",inv:"R 3 5",category:"triads.diatonic.major.R35",notes:"re fa la"},{function:"iii",inv:"R 3 5",category:"triads.diatonic.major.R35",notes:"mi so ti"},{function:"IV",inv:"R 3 5",category:"triads.diatonic.major.R35",notes:"fa la do"},{function:"V",inv:"R 3 5",category:"triads.diatonic.major.R35",notes:"so ti re"},{function:"vi",inv:"R 3 5",category:"triads.diatonic.major.R35",notes:"la do mi"},{function:"vii b5",inv:"R 3 5",category:"triads.diatonic.major.R35",notes:"ti re fa"},{function:"I",inv:"3 5 R",category:"triads.diatonic.major.35R",notes:"mi so do"},{function:"ii",inv:"3 5 R",category:"triads.diatonic.major.35R",notes:"fa la re"},{function:"iii",inv:"3 5 R",category:"triads.diatonic.major.35R",notes:"so ti mi"},{function:"IV",inv:"3 5 R",category:"triads.diatonic.major.35R",notes:"la do fa"},{function:"V",inv:"3 5 R",category:"triads.diatonic.major.35R",notes:"ti re so"},{function:"vi",inv:"3 5 R",category:"triads.diatonic.major.35R",notes:"do mi la"},{function:"vii b5",inv:"3 5 R",category:"triads.diatonic.major.35R",notes:"re fa ti"},{function:"I",inv:"5 R 3",category:"triads.diatonic.major.5R3",notes:"so do mi"},{function:"ii",inv:"5 R 3",category:"triads.diatonic.major.5R3",notes:"la re fa"},{function:"iii",inv:"5 R 3",category:"triads.diatonic.major.5R3",notes:"ti mi so"},{function:"IV",inv:"5 R 3",category:"triads.diatonic.major.5R3",notes:"do fa la"},{function:"V",inv:"5 R 3",category:"triads.diatonic.major.5R3",notes:"re so ti"},{function:"vi",inv:"5 R 3",category:"triads.diatonic.major.5R3",notes:"mi la do"},{function:"vii b5",inv:"5 R 3",category:"triads.diatonic.major.5R3",notes:"fa ti re"}]),ct=[{function:"i",inv:"R 3 5",category:"triads.diatonic.minor.R35",notes:"do me so"},{function:"ii b5",inv:"R 3 5",category:"triads.diatonic.minor.R35",notes:"re fa le"},{function:"bIII",inv:"R 3 5",category:"triads.diatonic.minor.R35",notes:"me so te"},{function:"iv",inv:"R 3 5",category:"triads.diatonic.minor.R35",notes:"fa le do"},{function:"v",inv:"R 3 5",category:"triads.diatonic.minor.R35",notes:"so te re"},{function:"bVI",inv:"R 3 5",category:"triads.diatonic.minor.R35",notes:"le do me"},{function:"bVII",inv:"R 3 5",category:"triads.diatonic.minor.R35",notes:"te re fa"},{function:"i",inv:"3 5 R",category:"triads.diatonic.minor.35R",notes:"me so do"},{function:"ii b5",inv:"3 5 R",category:"triads.diatonic.minor.35R",notes:"fa le re"},{function:"bIII",inv:"3 5 R",category:"triads.diatonic.minor.35R",notes:"so te me"},{function:"iv",inv:"3 5 R",category:"triads.diatonic.minor.35R",notes:"le do fa"},{function:"v",inv:"3 5 R",category:"triads.diatonic.minor.35R",notes:"te re so"},{function:"bVI",inv:"3 5 R",category:"triads.diatonic.minor.35R",notes:"do me le"},{function:"bVII",inv:"3 5 R",category:"triads.diatonic.minor.35R",notes:"re fa te"},{function:"i",inv:"5 R 3",category:"triads.diatonic.minor.5R3",notes:"so do me"},{function:"ii b5",inv:"5 R 3",category:"triads.diatonic.minor.5R3",notes:"le re fa"},{function:"bIII",inv:"5 R 3",category:"triads.diatonic.minor.5R3",notes:"te me so"},{function:"iv",inv:"5 R 3",category:"triads.diatonic.minor.5R3",notes:"do fa le"},{function:"v",inv:"5 R 3",category:"triads.diatonic.minor.5R3",notes:"re so te"},{function:"bVI",inv:"5 R 3",category:"triads.diatonic.minor.5R3",notes:"me le do"},{function:"bVII",inv:"5 R 3",category:"triads.diatonic.minor.5R3",notes:"fa te re"}],st=[{function:"do",inv:"do",category:"singlets",notes:"do"},{function:"ra",inv:"ra",category:"singlets",notes:"ra"},{function:"re",inv:"re",category:"singlets",notes:"re"},{function:"ri/me",inv:"ri/me",category:"singlets",notes:"me"},{function:"mi",inv:"mi",category:"singlets",notes:"mi"},{function:"fa",inv:"fa",category:"singlets",notes:"fa"},{function:"fi/se",inv:"fi/se",category:"singlets",notes:"fi"},{function:"so",inv:"so",category:"singlets",notes:"so"},{function:"si/le",inv:"si/le",category:"singlets",notes:"le"},{function:"la",inv:"la",category:"singlets",notes:"la"},{function:"li/te",inv:"li/te",category:"singlets",notes:"te"},{function:"ti",inv:"ti",category:"singlets",notes:"ti"}],ut=ot.concat(ct).concat(st);n("a15b"),n("ac1f"),n("1276");function dt(t){return"octave-instantiated-chord"==t.kind?[t.notes]:"sequence"==t.kind?t.sequence:[t.notes]}function lt(t,e,n,i){return{id:"tonic="+e+t.toString()+" chord: "+i,kind:"octave-instantiated-chord",base:i,tonic:e,octave:t,notes:n}}function ft(t,e){return{id:"sequence: "+e.join("  && "),kind:"sequence",bases:e,sequence:t}}function ht(t,e){return{id:"polychord: "+e.join(" && "),kind:"polychord",bases:e,notes:t}}function pt(t){var e=$(t.notes.split(" ").map(Y));return{id:t.function+" : "+t.inv,function:t.function,inversion:t.inv,category:t.category.split("."),notes:e,kind:"chord"}}n("a630");function vt(t){var e=new Map;t.forEach((function(t){var n="";t.category.forEach((function(i,r){var a=""==n?i:n+"."+i;if(!e.has(a)){var o={id:a,name:i,children:[]};if(e.set(a,o),e.has(n)){var c=e.get(n);c.children.push(o)}}if(r==t.category.length-1){var s={id:t.id,name:t.id},u=e.get(a);u.children.push(s)}n=a}))}));var n=new Set(t.map((function(t){return t.category[0]}))),i=Array.from(n).map((function(t){return e.get(t)}));return i}function gt(t){return vt(t.map((function(t){return{id:t.id,category:t.category}})))}n("4de4");var mt=n("2909"),yt=function(){function t(e,n){var i=this;Object(c["a"])(this,t),this._lastCard="",this._newCards=Object(mt["a"])(e),N(this._newCards),this._priorities=n,this._attempts=[],this._flashcardToIndex=new Map,this._newCards.forEach((function(t,e){return i._flashcardToIndex.set(t,{kind:"new",index:e})}))}return Object(s["a"])(t,[{key:"resetPriorities",value:function(t){this._priorities=t}},{key:"drawCard",value:function(){var t=this;try{return this._attempts.length<=this._priorities.byPercentiles.length&&this._newCards.length>0?this.drawNewCard():0==this._newCards.length?this.drawAttemptedCard():Rt([[this._priorities.percentNew,function(){return t.drawNewCard()}],[100-this._priorities.percentNew,function(){return t.drawAttemptedCard()}]])}catch(e){return console.log("Big mess up trying to draw a card: "+e),""}}},{key:"drawAttemptedCard",value:function(){return wt(this._priorities.byPercentiles,this._attempts).flashcardId}},{key:"drawNewCard",value:function(){return this._newCards[this._newCards.length-1]}},{key:"recordAttempt",value:function(t,e){var n=this._flashcardToIndex.get(t);if(console.log(n),"attempted"==(null===n||void 0===n?void 0:n.kind)){var i=this._attempts[n.index];i.totalTries++,i.successful+=e?1:0,i.failed+=e?0:1,bt(this._attempts,n.index,this._flashcardToIndex)}else if("new"==(null===n||void 0===n?void 0:n.kind)){if(n.index!=this._newCards.length-1)throw console.log("Invariant that new cards are always the last in the deck violated."),new Error("Invariant that new cards are always the last in the deck violated.");this._newCards.pop(),this._attempts.push({flashcardId:t,successful:e?1:0,failed:e?0:1,totalTries:1}),this._flashcardToIndex.set(t,{kind:"attempted",index:this._attempts.length-1}),bt(this._attempts,this._attempts.length-1,this._flashcardToIndex)}}},{key:"resetFlashcards",value:function(t){var e=this,n=new Set(t),i=new Set;this._newCards.forEach((function(t){return i.add(t)})),this._attempts.forEach((function(t){return i.add(t.flashcardId)}));var r=Object(mt["a"])(n).filter((function(t){return!i.has(t)}));this._newCards=this._newCards.filter((function(t){return n.has(t)})),this._attempts=this._attempts.filter((function(t){return n.has(t.flashcardId)})),this._newCards=this._newCards.concat(Object(mt["a"])(r)),N(this._newCards),this._flashcardToIndex=new Map,this._newCards.forEach((function(t,n){return e._flashcardToIndex.set(t,{kind:"new",index:n})})),this._attempts.forEach((function(t,n){return e._flashcardToIndex.set(t.flashcardId,{kind:"attempted",index:n})}))}}]),t}();function bt(t,e,n){var i=function(t){return t.successful*t.successful/t.totalTries},r=function(t,e){return i(t)<i(e)},a=function(t,e){return i(t)>i(e)};function o(t,e,i){n.get(t[e].flashcardId).index=i,n.get(t[i].flashcardId).index=e;var r=t[e];t[e]=t[i],t[i]=r}function c(t,e){while(e>0&&r(t[e],t[e-1]))o(t,e,e-1),e--}function s(t,e){while(e<t.length-1&&a(t[e],t[e+1]))o(t,e,e+1),e++}s(t,e),c(t,e)}function wt(t,e){var n=t.length,i=kt(e,n);return Rt(t.map((function(t,n){return[t,function(){return e[F(i[n][0],i[n][1])]}]})))}function _t(t){var e=[],n=0;return t.forEach((function(t){e.push((n+t)/100),n+=t})),e}function Rt(t){var e=_t(t.map((function(t){return t[0]})));if(1!=e[e.length-1])throw console.log("Probabilities don't add up to 1"),console.log(t),new Error("Probabilities don't add up to 1.");var n=Math.random(),i=0;while(n>e[i])i++;return t[i][1]()}function kt(t,e){for(var n=t.length/e,i=n%1==0,r=Math.ceil(n),a=[],o=0,c=r-1,s=0;s<e;s++){var u=Math.min(c,t.length-1);o<=u&&a.push([o,u]),o=u+1,c=u+(r-(s%2!=0||i?0:1))}if(a.length<e){a.reverse();while(a.length<e)a.push(a[a.length-1]);a.reverse()}return a}var Ct=n("af81"),jt=function(){function t(e){Object(c["a"])(this,t),this._piano=new Ct["a"],this._options=e}return Object(s["a"])(t,[{key:"load",value:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(T["m"])();case 3:return t.next=5,T["i"].resume();case 5:return t.next=7,this._piano.context.resume();case 7:return this._piano.toDestination(),t.next=10,this._piano.load();case 10:return console.log("Piano load successful."),t.abrupt("return",!0);case 14:return t.prev=14,t.t0=t["catch"](0),console.log(t.t0),t.abrupt("return",!1);case 18:case"end":return t.stop()}}),t,this,[[0,14]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"playMusicalPhrase",value:function(t){var e=this,n=0;this._options.playReference&&(this.playChord([this._options.referenceNote],n,n+1),n++),t.forEach((function(t){e.playChord(t,n,n+1),n++}))}},{key:"playChord",value:function(t,e,n){var i=this,r=60/this._options.bpm,a=function(t){return"+"+(t*r).toString()},o=t.map(G);o.forEach((function(t){return i._piano.keyDown({midi:t,time:a(e)})})),o.forEach((function(t){return i._piano.keyUp({midi:t,time:a(n)})}))}}]),t}(),It=(n("a623"),n("13d5"),function(){function t(e,n){Object(c["a"])(this,t),this._target=[],this._failedYet=!1,this._input=[],this._batchSizes=[],this._maxInputLength=0,this._config=e,this._emit=n}return Object(s["a"])(t,[{key:"setConfig",value:function(t){this._config=t}},{key:"setEmit",value:function(t){this._emit=t}},{key:"resetTarget",value:function(t){this._target=t.map((function(t){return t.map(G)})),this._failedYet=!1,this._input=[],this._batchSizes=t.map((function(t){return t.length})),this._maxInputLength=this._batchSizes.reduce((function(t,e){return t+e}),0)}},{key:"accept",value:function(t){if(t==G(this._config.giveUp))this._emit({kind:"giveUp"});else if(t==G(this._config.nextCard))this._emit({kind:"nextCard"});else if(t==G(this._config.replay))this._emit({kind:"replay"});else if(this._input.push(t),this._input.length<this._maxInputLength);else{this._input.length>this._maxInputLength&&this._input.shift();var e=Ot(this._input,this._batchSizes);xt(e,this._target)?this._emit({kind:"rightAnswer",onFirstGuess:!this._failedYet}):this._failedYet=!0}}}]),t}());function Ot(t,e){var n=[],i=0;return e.forEach((function(e){for(var r=[],a=0;a<e&&i<t.length;a++)r.push(t[i++]);n.push(r)})),n}function xt(t,e){function n(t,e){var n=new Set(t);return t.length==e.length&&e.every((function(t){return n.has(t)}))}if(t.length!=e.length)return!1;for(var i=0;i<t.length;i++)if(!n(t[i],e[i]))return!1;return!0}n("fb6a");function St(t,e){if("tonal"==t.tonality.kind){var n=M(e,(function(e){return Mt(e,t.lowestNote,t.highestNote,t.tonality.tonic)}));if(N(n),t.chunkSize<=1&&!t.apreggiateChords)return n.slice(0,Math.min(t.cards,n.length));if("sequence"==t.chunkType||t.apreggiateChords)return U((function(){return Vt(n,t.chunkSize,t.apreggiateChords,t.repeats)}),t.cards);if("polychord"==t.chunkType)return U((function(){return Tt(n,t.chunkSize)}),t.cards);throw new Error("Unsupported chunkType: "+t.chunkType)}throw new Error("Unsupported tonality type.")}function Et(t){if("octave-instantiated-chord"==t.kind)return t.notes;throw new Error("Can't take notes out of non-chord derived: "+t.kind)}function Vt(t,e,n,i){var r=A(t,e,i);return ft(n?[M(r,Et)]:r.map(Et),r.map((function(t){return t.id})))}function Tt(t,e){var n=A(t,e,"no-repeats"),i=Object(mt["a"])(new Set(M(n,Et).map(G)));return i.sort(),ht(i.map(q),n.map((function(t){return t.id})))}function Mt(t,e,n,i){var r=[2,3,4,5,6],a=G(e),o=G(n);if("chord"==t.kind){var c=[];return r.forEach((function(e){var n=L(i,e),r=lt(e,i,t.notes.map((function(t){return B(t,n)})),t.id),s=Et(r).map(G),u=Math.max.apply(Math,Object(mt["a"])(s)),d=Math.min.apply(Math,Object(mt["a"])(s));u<=o&&d>=a&&c.push(r)})),c}return console.log("Trying to octave displace unsupported flashcard type: "+t.kind),[]}pt({function:"I",category:"sdkljg",inv:"R 3 5",notes:"do mi so"}),pt({function:"ii",category:"sdkljg",inv:"R 3 5",notes:"re fa la"});var Ft=n("c62b"),Pt=n.n(Ft),At=function(t){Object(u["a"])(n,t);var e=Object(d["a"])(n);function n(){var t;return Object(c["a"])(this,n),t=e.apply(this,arguments),t.options=H,t.chords=ut.map(pt),t.selectedFlashcardIds=[],t.categories=gt(t.chords),t.activeFlashcards=[],t.cardDrawer=new yt(t.selectedFlashcardIds,t.options.priorities),t.player=void 0,t.midiBatcher=new It(H.commands,(function(t){return console.log("got midi event, not sure what to do with it yet.")})),t.pianoLoaded=!1,t.practiceState={currentCardId:"",wrongGuesses:0,giveUp:!1},t}return Object(s["a"])(n,[{key:"loadAll",value:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,n=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.cardDrawer.resetPriorities(this.options.priorities),e=D(this.chords,(function(t){return t.id})),this.activeFlashcards=St(this.options.derivation,this.selectedFlashcardIds.map((function(t){return e.get(t)}))),this.cardDrawer.resetFlashcards(this.activeFlashcards.map((function(t){return t.id}))),this.player=new jt(this.options.play),t.next=7,this.player.load();case 7:this.pianoLoaded=!0,Pt.a.enable((function(t){void 0!=t?console.log("Error trying to setup midi listener: "+t.name):console.log("Successfully set up midi listner."),console.log(Pt.a.inputs),console.log(Pt.a.outputs),0==Pt.a.inputs.length&&console.log("No midi input device detected.");var e=Pt.a.inputs[0];e.addListener("noteon","all",(function(t){n.midiBatcher.accept(t.note.number)}))}),!0),this.midiBatcher.setEmit((function(t){"giveUp"==t.kind?n.giveUp():"replay"==t.kind?n.playCard():"nextCard"==t.kind?(n.recordResult(!1),n.drawCard(),n.playCard()):"rightAnswer"==t.kind&&(n.recordResult(t.onFirstGuess),n.drawCard(),n.playCard())})),this.drawCard(),this.playCard();case 12:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"drawCard",value:function(){try{this.practiceState={currentCardId:this.cardDrawer.drawCard(),wrongGuesses:0,giveUp:!1};var t=this.currentCard;this.midiBatcher.resetTarget(dt(t))}catch(e){console.log(e)}}},{key:"recordResult",value:function(t){try{this.cardDrawer.recordAttempt(this.practiceState.currentCardId,t),this.drawCard()}catch(e){console.log(e)}}},{key:"playCard",value:function(){var t=this.currentCard;this.player.playMusicalPhrase(dt(t))}},{key:"giveUp",value:function(){this.practiceState.giveUp=!0}},{key:"chordsbyId",get:function(){var t=new Map;return this.activeFlashcards.forEach((function(e){return t.set(e.id,e)})),t}},{key:"currentCard",get:function(){return this.chordsbyId.get(this.practiceState.currentCardId)}},{key:"currentCardDescription",get:function(){return void 0==this.currentCard?"":this.currentCard.id}}]),n}(f["d"]);At=Object(l["a"])([Object(f["a"])({components:{FlashcardSelector:C,OptionsEditor:tt,VApp:et["a"],VMain:nt["a"],VTabs:it["a"],VTab:rt["a"],VTabItem:at["a"],VContainer:g["a"],VRow:m["a"],VCol:y["a"],VBtn:V["a"]}})],At);var Nt=At,Ut=Nt,Dt=(n("5c0b"),Object(R["a"])(Ut,r,a,!1,null,null,null)),Bt=Dt.exports,Lt=n("2f62");i["a"].use(Lt["a"]);var qt=new Lt["a"].Store({state:{},mutations:{},actions:{},modules:{}}),zt=n("f309"),Gt=(n("bf40"),new zt["a"]({}));i["a"].use(zt["a"]),i["a"].config.productionTip=!1,new i["a"]({vuetify:Gt,store:qt,render:function(t){return t(Bt)}}).$mount("#app")}});
//# sourceMappingURL=app.173bd897.js.map