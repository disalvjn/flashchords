{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/App.vue?c650","webpack:///./src/components/FlashcardSelector.vue?6c39","webpack:///./src/App.vue?5831","webpack:///./src/components/FlashcardSelector.vue?5b78","webpack:///./src/components/FlashcardSelector.vue","webpack:///./src/components/FlashcardSelector.vue?9a0c","webpack:///./src/components/FlashcardSelector.vue?532c","webpack:///./src/components/OptionsEditor.vue?4a44","webpack:///./src/domain/models/options.ts","webpack:///./src/domain/notes.ts","webpack:///./src/components/OptionsEditor.vue","webpack:///./src/components/OptionsEditor.vue?3cdb","webpack:///./src/components/OptionsEditor.vue?ae06","webpack:///./src/flashcards/chords/triads/diatonic-major-root-triads.ts","webpack:///./src/flashcards/chords/triads/diatonic-minor-root-triads.ts","webpack:///./src/flashcards/chords/singlets.ts","webpack:///./src/flashcards/chords/chord-entities.ts","webpack:///./src/domain/models/flashcard.ts","webpack:///./src/domain/models/category.ts","webpack:///./src/domain/cardDrawer.ts","webpack:///./src/domain/soundPlayer.ts","webpack:///./src/domain/midiBatcher.ts","webpack:///./src/App.vue","webpack:///./src/App.vue?0ab4","webpack:///./src/App.vue?bff9","webpack:///./src/store/index.ts","webpack:///./src/main.ts"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","_vm","this","_h","$createElement","_c","_self","_v","practiceState","_s","currentCardDescription","_e","selectedFlashcardIds","staticClass","pianoLoaded","on","drawCard","giveUp","playCard","$event","recordResult","loadPiano","model","callback","$$v","options","expression","attrs","categories","staticRenderFns","selected","newVal","oldVal","emitSelected","immediate","deep","components","VTreeview","VContainer","VRow","VCol","component","emit","$set","numberedNoteDropdownOptions","referenceNote","tonic","lowestRoot","_n","priorities","byPercentilesString","defaultOptions","drone","kind","class","octave","tonicizeAndDeduplicate","arpeggiateChords","cardChunkSize","percentNew","byPercentiles","noteDropdownOptions","flatMapThatJsReplVSCodeExtensionDoesntComplainAbout","items","f","forEach","num","map","letter","toString","NoteToMidi","note","midi","toMidi","offsetFromRoot","solfege","octaveOffset","toSolfege","console","log","Error","toOctaveSolfege","maxOffsetSoFar","baseOffset","withOctave","newValue","split","x","parseInt","stringToScientificNote","pitch","substring","VSelect","VCheckbox","VTextField","VBtn","diatonicMajorRootTriads","function","inv","category","notes","diatonicMinorRootTriads","singlets","chordEntities","concat","chordEntityToModel","entity","id","inversion","reifyHelper","idCategories","categoriesByPath","Map","item","path","index","newPath","has","children","set","parent","leaf","topLevelNames","Set","topLevelCategories","Array","from","reifyCategories","flashcards","_lastCard","_newCards","shuffleArray","_priorities","_attempts","_flashcardToIndex","drawNewCard","drawAttemptedCard","pickByPercentages","e","drawFromEquallySizedGroupsBasedOnPercentages","flashcardId","success","currentPlace","card","totalTries","successful","failed","maintainSort","pop","next","current","add","a","filter","attempts","locations","percentHit","lessThan","b","greaterThan","swap","list","tmp","maintainSortByTricklingDown","maintainSortByTricklingUp","percentages","partitions","indexGroups","divideEquallyIntoInclusiveIndices","percent","randomNumberBetweenInclusive","intoCumulativePercentages","soFar","probabilitiesAndActions","cumulative","Math","random","low","high","floor","roughSizePerGroupFrac","dividesCleanly","roughSizePerGroup","ceil","realHigh","min","reverse","array","_piano","resume","context","toDestination","load","time","reference","toTime","midiNotes","midiReference","undefined","trueChordStartTime","trueChordEndTime","keyDown","keyUp","config","_target","_failedYet","_input","_batchSizes","_maxInputLength","_config","_emit","reduce","nextCard","replay","batched","batch","batchesEqual","onFirstGuess","inputs","batchSizes","batchSize","_","batchEqual","aSet","every","chords","cardDrawer","player","midiBatcher","currentCardId","wrongGuesses","resetPriorities","resetFlashcards","enable","ex","outputs","input","addListener","accept","number","setEmit","event","currentCard","chord","resetTarget","recordAttempt","playChord","chordsbyId","join","FlashcardSelector","OptionsEditor","VApp","VMain","VTabs","VTab","VTabItem","use","Store","state","mutations","actions","vuetify","productionTip","store","render","h","$mount"],"mappings":"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","file":"js/app.d22a9410.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=scss&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FlashcardSelector.vue?vue&type=style&index=0&id=014bcfce&scoped=true&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-app',[_c('v-main',[_c('v-tabs',[_c('v-tab',[_vm._v(\" Let's go! \")]),_c('v-tab-item',[_c('v-container',[(this.practiceState.giveUp)?_c('v-row',[_c('v-col',[_c('h2',[_vm._v(_vm._s(_vm.currentCardDescription))])])],1):_vm._e(),(this.selectedFlashcardIds.length == 0)?_c('v-row',[_c('v-col',{staticClass:\"md-12\"},[_c('h2',[_vm._v(\"No Flashcards Selected\")])])],1):(!_vm.pianoLoaded)?_c('v-row',[_c('v-btn',{on:{\"click\":_vm.loadPiano}},[_c('h1',[_vm._v(\"Load Piano\")])])],1):_c('v-row',[_c('v-col',{staticClass:\"md-2\"},[_c('v-btn',{on:{\"click\":_vm.drawCard}},[_vm._v(\"Draw Card\")])],1),_c('v-col',{staticClass:\"md-2\"},[_c('v-btn',{on:{\"click\":_vm.giveUp}},[_vm._v(\"Give Up\")])],1),_c('v-col',{staticClass:\"md-2\"},[_c('v-btn',{on:{\"click\":_vm.playCard}},[_vm._v(\"Play Card\")])],1),_c('v-col',{staticClass:\"md-2\"},[_c('v-btn',{on:{\"click\":function($event){return _vm.recordResult(true)}}},[_vm._v(\"Succeed\")])],1),_c('v-col',{staticClass:\"md-2\"},[_c('v-btn',{on:{\"click\":function($event){return _vm.recordResult(false)}}},[_vm._v(\"Fail\")])],1)],1)],1)],1),_c('v-tab',[_vm._v(\" Options \")]),_c('v-tab-item',[_c('options-editor',{model:{value:(_vm.options),callback:function ($$v) {_vm.options=$$v},expression:\"options\"}})],1),_c('v-tab',[_vm._v(\" Flashcards \")]),_c('v-tab-item',[_c('flashcardSelector',{attrs:{\"categories\":_vm.categories},model:{value:(_vm.selectedFlashcardIds),callback:function ($$v) {_vm.selectedFlashcardIds=$$v},expression:\"selectedFlashcardIds\"}})],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',[_c('v-row',[_c('v-col',{staticClass:\"lg-6\"},[_c('v-treeview',{attrs:{\"open-all\":\"\",\"selectable\":\"\",\"dense\":\"\",\"items\":_vm.categories,\"item-children\":\"children\",\"item-key\":\"id\",\"item-text\":\"name\"},model:{value:(_vm.selected),callback:function ($$v) {_vm.selected=$$v},expression:\"selected\"}})],1),_c('v-col',{staticClass:\"lg-6\"})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport { Component, Watch, Emit, Prop, Vue } from \"vue-property-decorator\";\r\nimport { Category } from \"../domain/models/category\";\r\nimport { VContainer, VRow, VCol, VTreeview } from \"vuetify/lib\";\r\n\r\n@Component ({\r\n  components: {\r\n    VTreeview, VContainer, VRow, VCol\r\n  }\r\n})\r\nexport default class FlashcardSelector extends Vue {\r\n  @Prop() private categories!: Category[];\r\n  private selected: string[] = [];\r\n\r\n  @Watch('selected', {immediate: true, deep: true})\r\n  newSelection(newVal: string[], oldVal: string[]) {\r\n    this.emitSelected(newVal);\r\n  }\r\n  \r\n  @Emit('input')\r\n  emitSelected(selected: string[]) {\r\n    const placeholderUntilIDeleteEsLintNoEmptyFunction = 0;\r\n  }\r\n\r\n}\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FlashcardSelector.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FlashcardSelector.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./FlashcardSelector.vue?vue&type=template&id=014bcfce&scoped=true&\"\nimport script from \"./FlashcardSelector.vue?vue&type=script&lang=ts&\"\nexport * from \"./FlashcardSelector.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./FlashcardSelector.vue?vue&type=style&index=0&id=014bcfce&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"014bcfce\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',[_c('v-row',[_c('v-col',{staticClass:\"md-2\"},[_c('v-btn',{on:{\"click\":_vm.emit}},[_vm._v(\" Commit \")])],1)],1),_c('v-row',[_c('v-col',{staticClass:\"md-2\"},[_c('v-checkbox',{attrs:{\"label\":\"Drone?\"},model:{value:(_vm.options.drone),callback:function ($$v) {_vm.$set(_vm.options, \"drone\", $$v)},expression:\"options.drone\"}})],1),_c('v-col',{staticClass:\"md-2\"},[_c('v-select',{attrs:{\"label\":\"Reference\",\"items\":_vm.numberedNoteDropdownOptions},model:{value:(_vm.referenceNote),callback:function ($$v) {_vm.referenceNote=$$v},expression:\"referenceNote\"}})],1),_c('v-col',{staticClass:\"md-2\"},[_c('v-select',{attrs:{\"label\":\"Tonic\",\"items\":_vm.numberedNoteDropdownOptions},model:{value:(_vm.tonic),callback:function ($$v) {_vm.tonic=$$v},expression:\"tonic\"}})],1),_c('v-col',{staticClass:\"md-2\"},[_c('v-select',{attrs:{\"label\":\"Lowest Root\",\"items\":_vm.numberedNoteDropdownOptions},model:{value:(_vm.lowestRoot),callback:function ($$v) {_vm.lowestRoot=$$v},expression:\"lowestRoot\"}})],1),_c('v-col',{staticClass:\"md-4\"},[_c('v-checkbox',{attrs:{\"label\":\"Tonicize and Deduplicate?\"},model:{value:(_vm.options.tonicizeAndDeduplicate),callback:function ($$v) {_vm.$set(_vm.options, \"tonicizeAndDeduplicate\", $$v)},expression:\"options.tonicizeAndDeduplicate\"}})],1)],1),_c('v-row',[_c('v-col',{staticClass:\"md-2\"},[_c('v-checkbox',{attrs:{\"label\":\"Arpeggiate Chords?\"},model:{value:(_vm.options.arpeggiateChords),callback:function ($$v) {_vm.$set(_vm.options, \"arpeggiateChords\", $$v)},expression:\"options.arpeggiateChords\"}})],1),_c('v-col',{staticClass:\"md-2\"},[_c('v-text-field',{attrs:{\"label\":\"Card Chunk Size\"},model:{value:(_vm.options.cardChunkSize),callback:function ($$v) {_vm.$set(_vm.options, \"cardChunkSize\", _vm._n($$v))},expression:\"options.cardChunkSize\"}})],1),_c('v-col',{staticClass:\"md-8\"})],1),_c('v-row',[_c('v-col',{staticClass:\"md-2\"},[_c('v-text-field',{attrs:{\"label\":\"Percent New\"},model:{value:(_vm.options.priorities.percentNew),callback:function ($$v) {_vm.$set(_vm.options.priorities, \"percentNew\", _vm._n($$v))},expression:\"options.priorities.percentNew\"}})],1),_c('v-col',{staticClass:\"md-2\"},[_c('v-text-field',{attrs:{\"label\":\"Percentiles\"},model:{value:(_vm.byPercentilesString),callback:function ($$v) {_vm.byPercentilesString=$$v},expression:\"byPercentilesString\"}})],1),_c('v-col',{staticClass:\"md-8\"})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { Note, PitchClass } from \"../notes\";\r\nexport { Options, defaultOptions, Priorities }\r\n\r\n\r\ninterface Options {\r\n\r\n    drone: boolean;\r\n    referenceNote: Note;\r\n    tonic: Note;\r\n    lowestRoot: Note;\r\n    tonicizeAndDeduplicate: boolean;\r\n\r\n    arpeggiateChords: boolean;\r\n    cardChunkSize: number;\r\n\r\n    // 60 20 20 | 50 \r\n    // would mean 50% new cards that haven't been tested yet, until that runs out\r\n    // then when a previously tested card is pulled, there is a :\r\n    // 60% chance it's a card that is in the bottom third of your performance\r\n    // 20% for 33-66th percentile\r\n    // 20% for 67-100th percentile \r\n    priorities: Priorities;\r\n\r\n}\r\n\r\ninterface Priorities {\r\n    percentNew: number;\r\n    byPercentiles: number[];\r\n}\r\n\r\nconst defaultOptions: Options = {\r\n    drone: true,\r\n    referenceNote: {kind: \"scientific\", class: \"A\", octave: 3},\r\n    tonic: {kind: \"scientific\", class: \"A\", octave: 3},\r\n    lowestRoot: {kind: \"scientific\", class: \"F#\", octave: 2},\r\n    tonicizeAndDeduplicate: false,\r\n    arpeggiateChords: false,\r\n    cardChunkSize: 1,\r\n    priorities: {\r\n        percentNew: 40,\r\n        byPercentiles: [50, 30, 20]\r\n    }\r\n};","import { Frequency } from \"tone\";\r\n\r\nexport { Note, MidiNote, NoteToMidi, SolfegeClass, OctaveSolfege, toSolfege, toOctaveSolfege, PitchClass, Octave, noteDropdownOptions, numberedNoteDropdownOptions };\r\n\r\ntype PitchClass = \"A\" | \"Bb\" | \"B\" | \"C\" | \"Db\" | \"D\" | \"Eb\" | \"E\" | \"F\" | \"F#\" | \"G\" | \"Ab\";\r\ntype Octave = 1 | 2 | 3 | 4 | 5 | 6  | 7 | 8;\r\nconst noteDropdownOptions = ['A', 'Bb', 'B', 'C', 'Db', 'D', 'Eb', 'E', 'F', 'F#', 'G', 'Ab'];\r\n\r\n function flatMapThatJsReplVSCodeExtensionDoesntComplainAbout<A, B>(items: A[], f: (a: A) => B[]): B[] {\r\n    const result: B[] = [];\r\n    items.forEach(i => {\r\n        f(i).forEach(j => result.push(j));\r\n    });\r\n    return result;\r\n}\r\n\r\nconst numberedNoteDropdownOptions: string[] = flatMapThatJsReplVSCodeExtensionDoesntComplainAbout(\r\n    [1, 2, 3, 4, 5, 6, 7, 8],\r\n    num => noteDropdownOptions.map(letter => letter + num.toString())\r\n);\r\n\r\ntype MidiNote = number;\r\n\r\ntype SolfegeClass = \"do\" \r\n    | \"ra\" | \"re\" | \"ri\" \r\n    | \"me\" | \"mi\"\r\n    | \"fa\" | \"fi\"\r\n    | \"se\" | \"so\" | \"si\" \r\n    | \"le\" | \"la\" | \"li\"\r\n    | \"te\" | \"ti\"\r\n\r\ntype OctaveSolfege = {octaveOffset: number, solfege: SolfegeClass};\r\n\r\ntype Note =  \r\n    {kind: \"solfege\", solfege: OctaveSolfege, tonic: Note}\r\n    | {kind: \"midi\", midi: number} \r\n    | {kind: \"scientific\", class: PitchClass, octave: Octave};\r\n\r\nfunction NoteToMidi(note: Note): MidiNote {\r\n    return note.kind == \"midi\" ? note.midi\r\n        : note.kind == \"scientific\" ? Frequency(note.class + note.octave.toString()).toMidi()\r\n        : offsetFromRoot(note.solfege.solfege) + 12 * note.solfege.octaveOffset + NoteToMidi(note.tonic);\r\n}\r\n\r\nfunction offsetFromRoot(solfege: SolfegeClass): number {\r\n    return solfege == \"do\" ? 0\r\n        : solfege == \"ra\" ? 1\r\n        : solfege == \"re\" ? 2\r\n        : solfege == \"ri\" ? 3\r\n        : solfege == \"me\" ? 3\r\n        : solfege == \"mi\" ? 4\r\n        : solfege == \"fa\" ? 5\r\n        : solfege == \"fi\" ? 6\r\n        : solfege == \"se\" ? 6\r\n        : solfege == \"so\" ? 7\r\n        : solfege == \"si\" ? 8\r\n        : solfege == \"le\" ? 8\r\n        : solfege == \"la\" ? 9\r\n        : solfege == \"li\" ? 10\r\n        : solfege == \"te\" ? 10\r\n        : solfege == \"ti\" ? 11\r\n        : -1; \r\n}\r\n\r\nfunction toSolfege(solfege: string): SolfegeClass {\r\n    if (offsetFromRoot(solfege as SolfegeClass) == -1) {\r\n        console.log(\"Not valid solfege: \" + solfege);\r\n        throw new Error(\"Invalid solfege: \" + solfege);\r\n    } else {\r\n        return solfege as SolfegeClass;\r\n    }\r\n}\r\n\r\n// just for ascending chords\r\nfunction toOctaveSolfege(solfege: SolfegeClass[]): OctaveSolfege[] {\r\n    let maxOffsetSoFar = -1;\r\n    let octave = 0;\r\n    const result: OctaveSolfege[] = [];\r\n\r\n    solfege.forEach(note => {\r\n        const baseOffset = offsetFromRoot(note) ?? 0;\r\n        while (baseOffset + octave * 12 <= maxOffsetSoFar) {\r\n            octave++;\r\n        }\r\n        const withOctave = baseOffset + 12 * octave;\r\n        maxOffsetSoFar = withOctave;\r\n        result.push({solfege: note, octaveOffset: octave});\r\n    });\r\n    return result;\r\n}\r\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport { Component, Watch, Emit, Prop, Vue } from \"vue-property-decorator\";\r\nimport { VBtn, VContainer, VRow, VCol, VSelect,VCheckbox, VTextField } from \"vuetify/lib\";\r\nimport { defaultOptions, Options } from \"../domain/models/options\";\r\nimport { Note, Octave, PitchClass, numberedNoteDropdownOptions } from \"../domain/notes\";\r\n\r\n@Component ({\r\n  components: {\r\n      VContainer, VRow, VCol,\r\n      VSelect, VCheckbox, VTextField,\r\n      VBtn\r\n  }\r\n})\r\nexport default class OptionsEditor extends Vue {\r\n    private readonly numberedNoteDropdownOptions: string[] = [ ... numberedNoteDropdownOptions ];\r\n\r\n    private readonly options: Options = { ... defaultOptions, priorities: { ... defaultOptions.priorities } };\r\n\r\n    private readonly referenceNote: string = \"A3\";\r\n    private readonly lowestRoot: string = \"F2\";\r\n    private readonly tonic: string = \"A3\";\r\n\r\n    private readonly byPercentilesString: string = \"50 30 20\";\r\n\r\n    @Watch('byPercentilesString')\r\n    byPercentilesChanged(newValue: string) {\r\n        this.options.priorities.byPercentiles = newValue.split(\" \").map(x => parseInt(x));\r\n    }\r\n\r\n    @Watch('referenceNote')\r\n    referenceNoteChanged(newValue: string) {\r\n        this.options.referenceNote = this.stringToScientificNote(newValue);\r\n    }\r\n\r\n    @Watch('lowestRoot')\r\n    lowestRootChanged(newValue: string) {\r\n        this.options.lowestRoot = this.stringToScientificNote(newValue);\r\n    }\r\n\r\n    @Watch('tonic')\r\n    tonicChanged(newValue: string) {\r\n        this.options.tonic = this.stringToScientificNote(newValue);\r\n    }\r\n\r\n    private stringToScientificNote(note: string): Note {\r\n        const pitch = note.substring(0, note.length - 1);\r\n        const octave = parseInt(note.substring(note.length - 1, note.length));\r\n        return {kind: \"scientific\", class: pitch as PitchClass, octave: octave as Octave};\r\n    }\r\n\r\n    @Emit('input')\r\n    emit(): Options {\r\n        return this.options;\r\n    }\r\n}\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OptionsEditor.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OptionsEditor.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./OptionsEditor.vue?vue&type=template&id=cc0fe744&\"\nimport script from \"./OptionsEditor.vue?vue&type=script&lang=ts&\"\nexport * from \"./OptionsEditor.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import { ChordFlashcardEntity } from \"@/domain/entities/chord-flashcard-entity\"\r\nexport { diatonicMajorRootTriads }\r\n\r\nconst diatonicMajorRootTriads: ChordFlashcardEntity[] = \r\n[\r\n    {\r\n        function: \"I\",\r\n        inv: \"R 3 5\",\r\n        category: \"triads.diatonic.major\",\r\n        notes: \"do mi so\"\r\n    },\r\n    {\r\n        function: \"ii\",\r\n        inv: \"R 3 5\",\r\n        category: \"triads.diatonic.major\",\r\n        notes: \"re fa la\"\r\n    },\r\n    {\r\n        function: \"iii\",\r\n        inv: \"R 3 5\",\r\n        category: \"triads.diatonic.major\",\r\n        notes: \"mi so ti\"\r\n    },\r\n    {\r\n        function: \"IV\",\r\n        inv: \"R 3 5\",\r\n        category: \"triads.diatonic.major\",\r\n        notes: \"fa la do\"\r\n    },\r\n    {\r\n        function: \"V\",\r\n        inv: \"R 3 5\",\r\n        category: \"triads.diatonic.major\",\r\n        notes: \"so ti re\"\r\n    },\r\n    {\r\n        function: \"vi\",\r\n        inv: \"R 3 5\",\r\n        category: \"triads.diatonic.major\",\r\n        notes: \"la do mi\"\r\n    },\r\n    {\r\n        function: \"vii b5\",\r\n        inv: \"R 3 5\",\r\n        category: \"triads.diatonic.major\",\r\n        notes: \"ti re fa\"\r\n    }\r\n];","import { ChordFlashcardEntity } from \"@/domain/entities/chord-flashcard-entity\"\r\n\r\nconst diatonicMinorRootTriads: ChordFlashcardEntity[] = \r\n\r\n[\r\n    {\r\n        function: \"i\",\r\n        inv: \"R 3 5\",\r\n        category: \"triads.diatonic.minor\",\r\n        notes: \"do me so\"\r\n    },\r\n    {\r\n        function: \"ii b5\",\r\n        inv: \"R 3 5\",\r\n        category: \"triads.diatonic.minor\",\r\n        notes: \"re fa le\"\r\n    },\r\n    {\r\n        function: \"bIII\",\r\n        inv: \"R 3 5\",\r\n        category: \"triads.diatonic.minor\",\r\n        notes: \"me so te\"\r\n    },\r\n    {\r\n        function: \"iv\",\r\n        inv: \"R 3 5\",\r\n        category: \"triads.diatonic.minor\",\r\n        notes: \"fa le do\"\r\n    },\r\n    {\r\n        function: \"v\",\r\n        inv: \"R 3 5\",\r\n        category: \"triads.diatonic.minor\",\r\n        notes: \"so te re\"\r\n    },\r\n    {\r\n        function: \"bVI\",\r\n        inv: \"R 3 5\",\r\n        category: \"triads.diatonic.minor\",\r\n        notes: \"le do me\"\r\n    },\r\n    {\r\n        function: \"bVII\",\r\n        inv: \"R 3 5\",\r\n        category: \"triads.diatonic.minor\",\r\n        notes: \"te re fa\"\r\n    }\r\n];\r\n\r\nexport { diatonicMinorRootTriads }","\r\nimport { ChordFlashcardEntity } from \"@/domain/entities/chord-flashcard-entity\";\r\n\r\nexport const singlets: ChordFlashcardEntity[] = \r\n[\r\n    {\r\n        function: \"do\",\r\n        inv: \"do\",\r\n        category: \"singlets\",\r\n        notes: \"do\"\r\n    },\r\n    {\r\n        function: \"ra\",\r\n        inv: \"ra\",\r\n        category: \"singlets\",\r\n        notes: \"ra\"\r\n    },\r\n    {\r\n        function: \"re\",\r\n        inv: \"re\",\r\n        category: \"singlets\",\r\n        notes: \"re\"\r\n    },\r\n    {\r\n        function: \"ri/me\",\r\n        inv: \"ri/me\",\r\n        category: \"singlets\",\r\n        notes: \"me\"\r\n    },\r\n    {\r\n        function: \"mi\",\r\n        inv: \"mi\",\r\n        category: \"singlets\",\r\n        notes: \"mi\"\r\n    },\r\n    {\r\n        function: \"fa\",\r\n        inv: \"fa\",\r\n        category: \"singlets\",\r\n        notes: \"fa\"\r\n    },\r\n    {\r\n        function: \"fi/se\",\r\n        inv: \"fi/se\",\r\n        category: \"singlets\",\r\n        notes: \"fi\"\r\n    },\r\n    {\r\n        function: \"so\",\r\n        inv: \"so\",\r\n        category: \"singlets\",\r\n        notes: \"so\"\r\n    },\r\n    {\r\n        function: \"si/le\",\r\n        inv: \"si/le\",\r\n        category: \"singlets\",\r\n        notes: \"le\"\r\n    },\r\n    {\r\n        function: \"la\",\r\n        inv: \"la\",\r\n        category: \"singlets\",\r\n        notes: \"la\"\r\n    },\r\n    {\r\n        function: \"li/te\",\r\n        inv: \"li/te\",\r\n        category: \"singlets\",\r\n        notes: \"te\"\r\n    },\r\n    {\r\n        function: \"ti\",\r\n        inv: \"ti\",\r\n        category: \"singlets\",\r\n        notes: \"ti\"\r\n    },\r\n];","import { diatonicMajorRootTriads } from './triads/diatonic-major-root-triads';\r\nimport { diatonicMinorRootTriads } from './triads/diatonic-minor-root-triads';\r\nimport { singlets } from './singlets';\r\n\r\nconst chordEntities = diatonicMajorRootTriads.concat(diatonicMinorRootTriads).concat(singlets);\r\n\r\nexport { chordEntities }","import { ChordFlashcardEntity } from \"../entities/chord-flashcard-entity\";\r\nimport { OctaveSolfege, toSolfege, toOctaveSolfege } from \"../notes\";\r\n\r\nexport { chordEntityToModel, Flashcard, FlashcardId }\r\n\r\ntype FlashcardId = string;\r\n\r\ntype SpecificFlashcardData  = \r\n    {kind: \"chord\", function: string, inversion: string}\r\n    | { kind: \"melody\" };\r\n\r\ninterface GeneralFlashcardData {\r\n    readonly id: FlashcardId;\r\n    readonly category: string[];\r\n    readonly notes: OctaveSolfege[]; \r\n}\r\n\r\ntype Flashcard = SpecificFlashcardData & GeneralFlashcardData;\r\n\r\nfunction chordEntityToModel(entity: ChordFlashcardEntity): Flashcard {\r\n    const notes = toOctaveSolfege(entity.notes.split(\" \").map(toSolfege));\r\n    return {\r\n        id: entity.function + \" : \" + entity.inv,\r\n        function: entity.function,\r\n        inversion: entity.inv,\r\n        category: entity.category.split(\".\"),\r\n        notes: notes,\r\n        kind: \"chord\"\r\n    };\r\n};\r\n\r\n// console.log(chordEntityToModel({function: \"iii\", inv: \"R 3 5 R 9\", category: \"triads.diatonic.major\", notes: \"do re mi do re\"}))\r\n// console.log(chordEntityToModel({function: \"iii\", inv: \"R 3 5\", category: \"triads.diatonic.major\", notes: \"do do re do re\"}))","import { Flashcard } from \"./flashcard\";\r\n\r\ninterface Category {\r\n    readonly id: string;\r\n    readonly name: string;\r\n}\r\n\r\ninterface ParentCategory extends Category {\r\n    readonly children: Category[];\r\n}\r\n\r\nfunction reifyHelper(idCategories: {id: string, category: string[]}[]): Category[] {\r\n    const categoriesByPath: Map<string, ParentCategory> = new Map<string, ParentCategory>();\r\n\r\n    idCategories.forEach(item => {\r\n        let path = \"\";\r\n        item.category.forEach((c, index) => {\r\n            const newPath = path == \"\" ? c : path + \".\" + c;\r\n\r\n            // if this category hasn't been created yet\r\n            if (!categoriesByPath.has(newPath)) {\r\n                const category = {id: newPath, name: c, children: []};\r\n                categoriesByPath.set(newPath, category);\r\n\r\n                // if there's a parent\r\n                if (categoriesByPath.has(path)) {\r\n                    const parent = categoriesByPath.get(path)!;\r\n                    parent.children!.push(category);\r\n                }\r\n            }\r\n\r\n            if (index == item.category.length - 1) {\r\n                const leaf = { id: item.id, name: item.id };\r\n                const parent = categoriesByPath.get(newPath)!;\r\n                parent.children!.push(leaf);\r\n            }\r\n\r\n            path = newPath;\r\n        });\r\n    });\r\n\r\n    const topLevelNames = new Set(idCategories.map(x => x.category[0]));\r\n    const topLevelCategories =  Array.from(topLevelNames).map(p => categoriesByPath.get(p)!);\r\n    return topLevelCategories;\r\n}\r\n\r\nfunction reifyCategories(flashcards: Flashcard[]): Category[] {\r\n    return reifyHelper(flashcards.map(f => ({id: f.id, category: f.category})));\r\n}\r\n\r\n// console.log(reifyHelper([ \r\n//     {id: \"I\", category: [\"triad\", \"diatonic\", \"major\"]}, \r\n//     {id: \"bIII\", category: [\"triad\", \"diatonic\", \"minor\"]},\r\n//     {id: \"xya\", category: [\"dyad\", \"diatonic\"]}]));\r\n\r\nexport { Category , reifyCategories }","import { FlashcardId } from \"./models/flashcard\";\r\nimport { Priorities } from \"./models/options\";\r\n\r\nexport { CardDrawer, PrioritiesCardDrawer }\r\n\r\ninterface CardDrawer {\r\n    drawCard(): FlashcardId;\r\n    recordAttempt(id: FlashcardId, success: boolean): void;\r\n    resetFlashcards(flashcards: FlashcardId[]): void;\r\n    resetPriorities(priorities: Priorities): void;\r\n}\r\n\r\ninterface AttemptHistory {\r\n    flashcardId: FlashcardId;\r\n    totalTries: number;\r\n    successful: number;\r\n    failed: number;\r\n}\r\n\r\ntype CardState = {kind: \"new\", index: number} | {kind: \"attempted\", index: number};\r\n\r\nclass PrioritiesCardDrawer implements CardDrawer {\r\n    private _priorities: Priorities;\r\n    private _lastCard: FlashcardId = \"\";\r\n\r\n    public _attempts: AttemptHistory[];\r\n    public _newCards: FlashcardId[];\r\n\r\n    public _flashcardToIndex: Map<FlashcardId, CardState>;\r\n\r\n    public constructor(flashcards: FlashcardId[], priorities: Priorities) {\r\n        this._newCards = [ ... flashcards ];\r\n        shuffleArray(this._newCards);\r\n\r\n        this._priorities = priorities;\r\n        this._attempts = []; \r\n\r\n        this._flashcardToIndex = new Map<string, CardState>();\r\n        this._newCards.forEach((n, i) => this._flashcardToIndex.set(n, {kind: \"new\", index: i}));\r\n    }\r\n\r\n    public resetPriorities(priorities: Priorities) {\r\n        this._priorities = priorities;\r\n    }\r\n\r\n    public drawCard(): string {\r\n        try {\r\n            if (this._attempts.length <= this._priorities.byPercentiles.length && this._newCards.length > 0) {\r\n                return this.drawNewCard();\r\n            } else if (this._newCards.length == 0) {\r\n                return this.drawAttemptedCard();\r\n            } else {\r\n                return pickByPercentages([\r\n                    [this._priorities.percentNew, () => this.drawNewCard()],\r\n                    [100 - this._priorities.percentNew, () => this.drawAttemptedCard()]\r\n                ]);\r\n            }\r\n        } catch (e) {\r\n            console.log(\"Big mess up trying to draw a card: \" + e);\r\n            return \"\";\r\n        }\r\n    }\r\n\r\n    private drawAttemptedCard(): string {\r\n        return drawFromEquallySizedGroupsBasedOnPercentages(this._priorities.byPercentiles, this._attempts).flashcardId;\r\n        // console.log(\"in drawAttemptedCard with lastCard: \" + this._lastCard);\r\n        // let attempt = this._lastCard; \r\n        // while (attempt != this._lastCard) {\r\n        //     console.log(\"inside this loop wehre we do work \" + attempt + \" -- \" + this._lastCard);\r\n        //     attempt = drawFromEquallySizedGroupsBasedOnPercentages(this._priorities.byPercentiles, this._attempts).flashcardId;\r\n        // }\r\n        // console.log(attempt + \" : \" + this._lastCard + \" : \" + (attempt == this._lastCard));\r\n        // this._lastCard = attempt;\r\n        // console.log(\"finna return with: \" + this._lastCard + \" -- \" + attempt);\r\n        // return attempt;\r\n    }\r\n\r\n    private drawNewCard(): string {\r\n        return this._newCards[this._newCards.length - 1];\r\n    }\r\n\r\n    public recordAttempt(id: string, success: boolean): void {\r\n        const currentPlace = this._flashcardToIndex.get(id);\r\n        console.log(currentPlace);\r\n\r\n        if (currentPlace?.kind == \"attempted\") {\r\n            const card = this._attempts[currentPlace.index];\r\n            card.totalTries++;\r\n            card.successful += success ? 1 : 0;\r\n            card.failed += success ? 0 : 1;\r\n            maintainSort(this._attempts, currentPlace.index, this._flashcardToIndex);\r\n\r\n        } else if (currentPlace?.kind == \"new\") {\r\n            if (currentPlace.index != this._newCards.length - 1) {\r\n                console.log(\"Invariant that new cards are always the last in the deck violated.\");\r\n                throw new Error(\"Invariant that new cards are always the last in the deck violated.\");\r\n            } else {\r\n                this._newCards.pop();\r\n                this._attempts.push({flashcardId: id, successful: success ? 1 : 0, failed: success ? 0 : 1, totalTries: 1});\r\n                this._flashcardToIndex.set(id, {kind: \"attempted\", index: this._attempts.length - 1});\r\n                maintainSort(this._attempts, this._attempts.length - 1, this._flashcardToIndex);\r\n            }\r\n        }\r\n    }\r\n\r\n    public resetFlashcards(flashcards: FlashcardId[]) {\r\n        const next = new Set(flashcards);\r\n        const current = new Set<FlashcardId>();\r\n        this._newCards.forEach(n => current.add(n));\r\n        this._attempts.forEach(a => current.add(a.flashcardId));\r\n\r\n        const add = [ ... next].filter(n => ! current.has(n));\r\n\r\n        this._newCards = this._newCards.filter(n => next.has(n));\r\n        this._attempts = this._attempts.filter(a => next.has(a.flashcardId));\r\n\r\n        this._newCards = this._newCards.concat([ ... add]);\r\n        shuffleArray(this._newCards);\r\n\r\n        this._flashcardToIndex = new Map<FlashcardId, CardState>();\r\n        this._newCards.forEach((n, i) => this._flashcardToIndex.set(n, {kind: \"new\", index: i}));\r\n        this._attempts.forEach((a, i) => this._flashcardToIndex.set(a.flashcardId, {kind: \"attempted\", index: i}));\r\n    }\r\n}\r\n\r\n//  like insertion sort\r\nfunction maintainSort(attempts: AttemptHistory[], index: number, locations: Map<FlashcardId, CardState>) {\r\n    const percentHit = (a: AttemptHistory) => (a.successful * a.successful / a.totalTries);\r\n    const lessThan = (a: AttemptHistory, b: AttemptHistory) => percentHit(a) < percentHit(b);\r\n    const greaterThan = (a: AttemptHistory, b: AttemptHistory) => percentHit(a) > percentHit(b);\r\n\r\n    function swap(list: AttemptHistory[], i: number, j: number) {\r\n        locations.get(list[i].flashcardId)!.index = j;\r\n        locations.get(list[j].flashcardId)!.index = i;\r\n\r\n        const tmp = list[i];\r\n        list[i] = list[j];\r\n        list[j] = tmp;\r\n    }\r\n\r\n    function maintainSortByTricklingDown(attempts: AttemptHistory[], index: number) {\r\n        while (index > 0 && lessThan(attempts[index], attempts[index - 1])) {\r\n            swap(attempts, index, index - 1);\r\n            index--;\r\n        }\r\n    }\r\n\r\n    function maintainSortByTricklingUp(attempts: AttemptHistory[], index: number) {\r\n        while (index < attempts.length - 1 && greaterThan(attempts[index], attempts[index + 1])) { \r\n            swap(attempts, index, index + 1);\r\n            index++;\r\n        }\r\n    }\r\n\r\n    maintainSortByTricklingUp(attempts, index);\r\n    maintainSortByTricklingDown(attempts, index);\r\n}\r\n\r\n\r\nfunction drawFromEquallySizedGroupsBasedOnPercentages<T>(percentages: IntegerPercentage[], list: T[]): T {\r\n    const partitions = percentages.length;\r\n    const indexGroups = divideEquallyIntoInclusiveIndices(list, partitions);\r\n    return pickByPercentages(percentages.map((percent, i) => [\r\n        percent, \r\n        () => list[randomNumberBetweenInclusive(indexGroups[i][0], indexGroups[i][1])]\r\n    ]));\r\n}\r\n\r\nfunction intoCumulativePercentages(priorities: number[]): number[] {\r\n    const result: number[] = [];\r\n    let soFar = 0;\r\n    priorities.forEach(p => {\r\n        result.push((soFar + p) / 100);\r\n        soFar += p;\r\n    });\r\n    return result;\r\n}\r\n\r\ntype IntegerPercentage = number;\r\nfunction pickByPercentages<T>(probabilitiesAndActions: [IntegerPercentage, () => T][]): T {\r\n    const cumulative = intoCumulativePercentages(probabilitiesAndActions.map(t => t[0]));\r\n    if (cumulative[cumulative.length - 1] != 1) {\r\n        console.log(\"Probabilities don't add up to 1\");\r\n        console.log(probabilitiesAndActions);\r\n        throw new Error(\"Probabilities don't add up to 1.\");\r\n    }\r\n    const r = Math.random();\r\n    let i = 0;\r\n    while (r > cumulative[i]) { \r\n        i ++;\r\n    }\r\n    return probabilitiesAndActions[i][1]();\r\n}\r\n\r\n\r\nfunction randomNumberBetweenInclusive(low: number, high: number) {\r\n    return Math.floor(Math.random() * (high - low + 1) + low);\r\n}\r\n\r\nfunction divideEquallyIntoInclusiveIndices<T>(list: T[], partitions: number): [number, number][] {\r\n    const roughSizePerGroupFrac = list.length / partitions;\r\n    const dividesCleanly = roughSizePerGroupFrac % 1 == 0;\r\n    const roughSizePerGroup = Math.ceil(roughSizePerGroupFrac);\r\n\r\n    const result: [number, number][] = [];\r\n\r\n    let low = 0;\r\n    let high = roughSizePerGroup - 1;\r\n\r\n    for (let i = 0; i < partitions; i++) {\r\n        const realHigh = Math.min(high, list.length - 1);\r\n        if (low <= realHigh) {\r\n            result.push([low, realHigh]);\r\n        }\r\n        low = realHigh + 1;\r\n        high = realHigh + (roughSizePerGroup - (i % 2 == 0 && !dividesCleanly ? 1 : 0))\r\n    }\r\n\r\n    if (result.length < partitions) {\r\n        result.reverse();\r\n        while (result.length < partitions) {\r\n            result.push(result[result.length - 1]);\r\n        }\r\n        result.reverse();\r\n    }\r\n\r\n    return result;\r\n}\r\n\r\n// https://stackoverflow.com/a/12646864\r\nfunction shuffleArray<T>(array: T[]) {\r\n    for (let i = array.length - 1; i > 0; i--) {\r\n        const j = Math.floor(Math.random() * (i + 1));\r\n        [array[i], array[j]] = [array[j], array[i]];\r\n    }\r\n}\r\n\r\n// let cd = new CardDrawer([\"A\", \"B\", \"C\", \"D\", \"E\", \"F\"], {byPercentiles: [60, 30, 10], percentNew: 50});\r\n// console.log([ ... cd._flashcardToIndex]);\r\n// let card1  = cd.drawCard();\r\n// cd.recordAttempt(card1, true);\r\n\r\n// let card2  = cd.drawCard();\r\n// cd.recordAttempt(card2, true);\r\n\r\n// let card3  = cd.drawCard();\r\n// cd.recordAttempt(card3, false);\r\n\r\n// console.log([ ... cd._flashcardToIndex]);","import { Piano } from \"@tonejs/piano\";\r\nimport { start, context, Time } from \"tone\";\r\nimport { Note, NoteToMidi } from \"./notes\";\r\n\r\nexport { SoundPlayer, PianoPlayer }\r\n\r\n\r\ninterface SoundPlayer {\r\n    playChord(notes: Note[], time: number, reference: Note | undefined): void;\r\n    load(): Promise<boolean>;\r\n}\r\n\r\n\r\nclass PianoPlayer implements SoundPlayer {\r\n    private _piano: Piano = new Piano();\r\n\r\n    public async load(): Promise<boolean> {\r\n        try {\r\n            await start();\r\n            await context.resume();\r\n            await this._piano.context.resume();\r\n            this._piano.toDestination();\r\n\r\n            await this._piano.load();\r\n            console.log(\"Piano load successful.\");\r\n            return true;\r\n        } catch (e) {\r\n            console.log(e);\r\n            return false;\r\n        }\r\n    }\r\n\r\n    public playChord(notes: Note[], time: number, reference: Note | undefined) {\r\n        const toTime = (n: number) => \"+\" + Math.floor(n).toString();\r\n\r\n        const midiNotes = notes.map(NoteToMidi);\r\n        const midiReference = reference ? NoteToMidi(reference) : undefined;\r\n        const trueChordStartTime = toTime(reference ? time : 0);\r\n        const trueChordEndTime = toTime(reference ? time * 2 : time);\r\n\r\n        if (midiReference) {\r\n            this._piano.keyDown({midi: midiReference});\r\n            this._piano.keyUp({midi: midiReference, time: trueChordStartTime});\r\n            midiNotes.forEach(n => this._piano.keyDown({midi: n, time: trueChordStartTime}));\r\n            midiNotes.forEach(n => this._piano.keyUp({midi: n, time: trueChordEndTime}));\r\n        } else {\r\n            midiNotes.forEach(n => this._piano.keyDown({midi: n}));\r\n            midiNotes.forEach(n => this._piano.keyUp({midi: n, time: trueChordEndTime}));\r\n        }\r\n    }\r\n}","import { MidiNote, Note, NoteToMidi } from \"./notes\";\r\n\r\nexport type MidiBatcherEvent = \r\n    {kind: \"rightAnswer\", onFirstGuess: boolean}\r\n    | {kind: \"giveUp\"}\r\n    | {kind: \"nextCard\"}\r\n    | {kind: \"replay\"}\r\n\r\nexport interface MidiBatcherConfig {\r\n    giveUp: MidiNote;\r\n    nextCard: MidiNote;\r\n    replay: MidiNote;\r\n}\r\n\r\nexport class MidiBatcher {\r\n    private _target: (MidiNote[])[] = [];\r\n    private _failedYet = false;\r\n    private _input: MidiNote[] = [];\r\n    private _batchSizes: number[] = [];\r\n    private _maxInputLength = 0;\r\n\r\n    private _config: MidiBatcherConfig;\r\n    private _emit: ((m: MidiBatcherEvent) => void);\r\n\r\n    constructor(config: MidiBatcherConfig, emit: (m: MidiBatcherEvent) => void)\r\n    {\r\n        this._config = config;\r\n        this._emit = emit;\r\n    }\r\n\r\n    setConfig(config: MidiBatcherConfig)\r\n    {\r\n        this._config = config;\r\n    }\r\n\r\n    setEmit(emit: (m: MidiBatcherEvent) => void)\r\n    {\r\n        this._emit = emit;\r\n    }\r\n\r\n    resetTarget(notes: (Note[])[]): void\r\n    {\r\n        this._target = notes.map(n => n.map(NoteToMidi));\r\n        this._failedYet = false;\r\n        this._input = [];\r\n        this._batchSizes = notes.map(n => n.length);\r\n        this._maxInputLength = this._batchSizes.reduce((a, x) => a + x, 0);\r\n    }\r\n\r\n    accept(note: MidiNote): void \r\n    {\r\n        if (note == this._config.giveUp) {\r\n            this._emit({kind: \"giveUp\"});\r\n        } else if (note == this._config.nextCard) {\r\n            this._emit({kind: \"nextCard\"});\r\n        } else if (note == this._config.replay) {\r\n            this._emit({kind: \"replay\"});\r\n        } else {\r\n\r\n            this._input.push(note);\r\n            if (this._input.length < this._maxInputLength) {\r\n                // do nothing, we don't have enough to try matching yet\r\n            } else {\r\n                if (this._input.length > this._maxInputLength) {\r\n                    this._input.shift();\r\n                }\r\n\r\n                const batched = batch(this._input, this._batchSizes);\r\n\r\n                if (batchesEqual(batched, this._target)) {\r\n                    this._emit({kind: \"rightAnswer\", onFirstGuess: !this._failedYet});\r\n                } else {\r\n                    this._failedYet = true;\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nfunction batch<T>(inputs: T[], batchSizes: number[]): T[][] {\r\n    const batched: T[][] = [];\r\n    let i = 0;\r\n    batchSizes.forEach(batchSize => {\r\n        const batch: T[] = [];\r\n        for (let _ = 0; _ < batchSize && i < inputs.length; _++) {\r\n            batch.push(inputs[i++]);\r\n        }\r\n        batched.push(batch);\r\n    })\r\n    return batched;\r\n}\r\n\r\nfunction batchesEqual<T>(a: T[][], b: T[][]) {\r\n    function batchEqual<T>(a: T[], b: T[]): boolean {\r\n        const aSet = new Set(a);\r\n        return (a.length == b.length) && b.every(x => aSet.has(x));\r\n    }\r\n\r\n    if (a.length != b.length) {\r\n        return false;\r\n    } else {\r\n        for (let i = 0; i < a.length; i++) {\r\n            if (! batchEqual(a[i], b[i])) {\r\n                return false;\r\n            }\r\n        }\r\n    }\r\n\r\n    return true;\r\n}\r\n\r\n\r\n// console.log(batch([1,2,3,4,5,6,7,8,9], [3, 2, 1, 3]))\r\n\r\n// console.log(batchesEqual([1,2,3], [2,3,1]))\r\n// console.log(batchesEqual([1,2,3], [3,1]))\r\n// console.log(batchesEqual([2,3], [3,1]))\r\n\r\n// let events: MidiBatcherEvent[] = [];\r\n// let m = new MidiBatcher({giveUp: 100, replay: 101, nextCard: 102}, x => events.push(x));\r\n// m.resetTarget([\r\n//     [{kind: \"midi\", midi: 1}, {kind: \"midi\", midi: 2}],\r\n//     [{kind: \"midi\", midi: 11}],\r\n//     [{kind: \"midi\", midi: 21}, {kind: \"midi\", midi: 22}]\r\n// ]);\r\n\r\n// m.accept(100);\r\n// console.log(events);\r\n// m.accept(1); m.accept(2); m.accept(11);\r\n// console.log(events);\r\n// m.accept(1); m.accept(2); m.accept(11); m.accept(22); m.accept(21);\r\n// console.log(events);\r\n// console.log(events);","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue, Watch } from \"vue-property-decorator\";\nimport HelloWorld from \"./components/HelloWorld.vue\";\nimport FlashcardSelector from \"./components/FlashcardSelector.vue\";\nimport OptionsEditor from \"./components/OptionsEditor.vue\";\nimport { Piano } from '@tonejs/piano';\nimport { VBtn, VContainer, VRow, VCol, VTabs, VApp, VMain, VTabItem, VTab } from \"vuetify/lib\";\n\nimport { chordEntities } from './flashcards/chords/chord-entities';\nimport { Flashcard, chordEntityToModel, FlashcardId } from './domain/models/flashcard';\nimport { reifyCategories , Category } from './domain/models/category';\nimport { Options, defaultOptions } from './domain/models/options';\nimport { PrioritiesCardDrawer, CardDrawer } from './domain/cardDrawer';\nimport { SoundPlayer, PianoPlayer } from './domain/soundPlayer';\nimport { Note, NoteToMidi } from \"./domain/notes\";\nimport { MidiBatcher } from \"./domain/midiBatcher\";\nimport webmidi, { WebMidi } from \"webmidi\";\n\ninterface PracticeState {\n  currentCardId: FlashcardId;\n  wrongGuesses: number;\n  giveUp: boolean;\n}\n\n@Component ({\n  components: {\n    FlashcardSelector, OptionsEditor,\n    VApp, VMain,\n    VTabs, VTab, VTabItem,\n    VContainer, VRow, VCol,\n    VBtn\n  }\n})\nexport default class App extends Vue {\n  private options: Options = defaultOptions;\n  private chords: Flashcard[] = chordEntities.map(chordEntityToModel);\n  private categories: Category[] = reifyCategories(this.chords);\n  private selectedFlashcardIds: FlashcardId[] = [];\n  private cardDrawer: CardDrawer = new PrioritiesCardDrawer(this.selectedFlashcardIds, this.options.priorities);\n  private player: SoundPlayer | undefined = undefined;\n  private midiBatcher: MidiBatcher = new MidiBatcher({\n    giveUp: NoteToMidi({kind: \"scientific\", class: \"Ab\", octave: 7}),\n    replay: NoteToMidi({kind: \"scientific\", class: \"F#\", octave: 7}),\n    nextCard: NoteToMidi({kind: \"scientific\", class: \"Bb\", octave: 7})\n    }, \n    _ => console.log(\"got midi event, not sure what to do with it yet.\"));\n\n  private pianoLoaded = false;\n\n  private practiceState: PracticeState = {currentCardId: \"\", wrongGuesses: 0, giveUp: false};\n\n  @Watch('options', {\n    deep: true\n  })\n  optionsChanged(newVal: Options) {\n    this.cardDrawer.resetPriorities(newVal.priorities);\n  }\n\n  @Watch('selectedFlashcardIds', { deep: true })\n  selectedFlashcardIdsChanged(newVal: FlashcardId[]) {\n    this.cardDrawer.resetFlashcards(newVal);\n  }\n\n  async loadPiano() {\n    this.player = new PianoPlayer();\n    await this.player.load();\n    this.pianoLoaded = true;\n\n    webmidi.enable(ex => {\n      if (ex != undefined) {\n        console.log(\"Error trying to setup midi listener: \" + ex.name);\n      } else {\n        console.log(\"Successfully set up midi listner.\")\n      }\n\n      console.log(webmidi.inputs);\n      console.log(webmidi.outputs);\n\n      if (webmidi.inputs.length == 0) {\n        console.log(\"No midi input device detected.\");\n      }\n\n      const input = webmidi.inputs[0];\n      input.addListener(\"noteon\", \"all\", e => {\n        this.midiBatcher.accept(e.note.number);\n      });\n    }, true);\n\n    this.midiBatcher.setEmit(event => {\n      if (event.kind == \"giveUp\") {\n        this.giveUp();\n      } else if (event.kind == \"replay\") {\n        this.playCard();\n      } else if (event.kind == \"nextCard\") {\n        this.recordResult(false);\n        this.drawCard();\n        this.playCard();\n      } else if (event.kind == \"rightAnswer\") {\n        this.recordResult(event.onFirstGuess);\n        this.drawCard();\n        this.playCard();\n      }\n    });\n\n    this.drawCard();\n    this.playCard();\n  }\n\n  drawCard() {\n    try {\n      this.practiceState = {currentCardId: this.cardDrawer.drawCard(), wrongGuesses: 0, giveUp: false};\n      const currentCard = this.currentCard!;\n      const chord: Note[] = currentCard.notes.map(s => ({kind: \"solfege\", solfege: s, tonic: this.options.tonic}));\n      this.midiBatcher.resetTarget([chord]);\n    } catch (e) {\n      console.log(e);\n    }\n  }\n\n  recordResult(success: boolean) {\n    try {\n      this.cardDrawer.recordAttempt(this.practiceState.currentCardId, success);\n      this.drawCard();\n    } catch (e) {\n      console.log(e);\n    }\n  }\n\n  playCard() {\n    const currentCard = this.currentCard;\n\n    if (currentCard && currentCard.kind == \"chord\") {\n      const chord: Note[] = currentCard.notes.map(s => ({kind: \"solfege\", solfege: s, tonic: this.options.tonic}));\n      console.log(chord);\n      this.player!.playChord(chord, 1, this.options.referenceNote);\n    }\n  }\n\n  giveUp() {\n    this.practiceState.giveUp = true;\n  }\n\n  get chordsbyId(): Map<FlashcardId, Flashcard> {\n    const result = new Map<FlashcardId, Flashcard>();\n    this.chords.forEach(c => result.set(c.id, c));\n    return result;\n  }\n\n  get currentCard(): Flashcard | undefined {\n    return this.chordsbyId.get(this.practiceState.currentCardId);\n  }\n\n  get currentCardDescription(): string {\n    return this.currentCard == undefined \n      ? \"\"\n\n      : this.currentCard.kind == \"chord\" \n      ? this.currentCard.function + \" \" + this.currentCard.inversion + \" : \" + this.currentCard.notes.map(n => n.solfege).join(\", \")\n\n      : this.currentCard.notes.join(\", \");\n  }\n}\n\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--14-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--14-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--14-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--14-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=82790bc8&\"\nimport script from \"./App.vue?vue&type=script&lang=ts&\"\nexport * from \"./App.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from \"vue\";\nimport Vuex from \"vuex\";\n\nVue.use(Vuex);\n\nexport default new Vuex.Store({\n  state: {},\n  mutations: {},\n  actions: {},\n  modules: {}\n});\n","import Vue from \"vue\";\r\nimport App from \"./App.vue\";\r\nimport store from \"./store\";\r\nimport Vuetify from \"vuetify/lib\";\r\n\r\nimport 'vuetify/dist/vuetify.min.css';\r\n\r\nconst vuetify = new Vuetify({});\r\n\r\nVue.use(Vuetify);\r\n\r\nVue.config.productionTip = false;\r\n\r\nnew Vue({\r\n  vuetify,\r\n  store,\r\n  render: h => h(App)\r\n}).$mount(\"#app\");"],"sourceRoot":""}