(function(t){function e(e){for(var i,a,s=e[0],c=e[1],l=e[2],d=0,f=[];d<s.length;d++)a=s[d],Object.prototype.hasOwnProperty.call(r,a)&&r[a]&&f.push(r[a][0]),r[a]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);u&&u(e);while(f.length)f.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],i=!0,s=1;s<n.length;s++){var c=n[s];0!==r[c]&&(i=!1)}i&&(o.splice(e--,1),t=a(a.s=n[0]))}return t}var i={},r={app:0},o=[];function a(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=i,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)a.d(n,i,function(e){return t[e]}.bind(null,i));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var u=c;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("cd49")},"5c0b":function(t,e,n){"use strict";n("9c0c")},"7c31":function(t,e,n){},"837e":function(t,e,n){"use strict";n("7c31")},"9c0c":function(t,e,n){},cd49:function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("2b0e"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",[n("v-main",[n("v-tabs",[n("v-tab",[t._v(" Let's go! ")]),n("v-tab-item",[n("v-container",[this.practiceState.giveUp?n("v-row",[n("v-col",[n("h2",[t._v(t._s(t.currentCardDescription))])])],1):t._e(),0==this.selectedFlashcardIds.length?n("v-row",[n("v-col",{staticClass:"md-12"},[n("h2",[t._v("No Flashcards Selected")])])],1):t.pianoLoaded?n("v-row",[n("v-col",{staticClass:"md-2"},[n("v-btn",{on:{click:t.drawCard}},[t._v("Draw Card")])],1),n("v-col",{staticClass:"md-2"},[n("v-btn",{on:{click:t.giveUp}},[t._v("Give Up")])],1),n("v-col",{staticClass:"md-2"},[n("v-btn",{on:{click:t.playCard}},[t._v("Play Card")])],1),n("v-col",{staticClass:"md-2"},[n("v-btn",{on:{click:function(e){return t.recordResult(!0)}}},[t._v("Succeed")])],1),n("v-col",{staticClass:"md-2"},[n("v-btn",{on:{click:function(e){return t.recordResult(!1)}}},[t._v("Fail")])],1)],1):n("v-row",[n("v-btn",{on:{click:t.loadPiano}},[n("h1",[t._v("Load Piano")])])],1)],1)],1),n("v-tab",[t._v(" Options ")]),n("v-tab-item",[n("options-editor",{model:{value:t.options,callback:function(e){t.options=e},expression:"options"}})],1),n("v-tab",[t._v(" Flashcards ")]),n("v-tab-item",[n("flashcardSelector",{attrs:{categories:t.categories},model:{value:t.selectedFlashcardIds,callback:function(e){t.selectedFlashcardIds=e},expression:"selectedFlashcardIds"}})],1)],1)],1)],1)},o=[],a=(n("4160"),n("a15b"),n("d81d"),n("b0c0"),n("4ec9"),n("d3b7"),n("3ca3"),n("159b"),n("ddb0"),n("96cf"),n("1da1")),s=n("d4ec"),c=n("bee2"),l=n("262e"),u=n("2caf"),d=n("9ab4"),f=n("1b40"),h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",[n("v-row",[n("v-col",{staticClass:"lg-6"},[n("v-treeview",{attrs:{"open-all":"",selectable:"",dense:"",items:t.categories,"item-children":"children","item-key":"id","item-text":"name"},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})],1),n("v-col",{staticClass:"lg-6"})],1)],1)},p=[],v=n("eb2a"),g=n("a523"),m=n("0fd9"),b=n("62ad"),y=function(t){Object(l["a"])(n,t);var e=Object(u["a"])(n);function n(){var t;return Object(s["a"])(this,n),t=e.apply(this,arguments),t.selected=[],t}return Object(c["a"])(n,[{key:"newSelection",value:function(t,e){this.emitSelected(t)}},{key:"emitSelected",value:function(t){}}]),n}(f["d"]);Object(d["a"])([Object(f["c"])()],y.prototype,"categories",void 0),Object(d["a"])([Object(f["e"])("selected",{immediate:!0,deep:!0})],y.prototype,"newSelection",null),Object(d["a"])([Object(f["b"])("input")],y.prototype,"emitSelected",null),y=Object(d["a"])([Object(f["a"])({components:{VTreeview:v["a"],VContainer:g["a"],VRow:m["a"],VCol:b["a"]}})],y);var w=y,_=w,C=(n("837e"),n("2877")),k=Object(C["a"])(_,h,p,!1,null,"014bcfce",null),O=k.exports,j=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",[n("v-row",[n("v-col",{staticClass:"md-2"},[n("v-btn",{on:{click:t.emit}},[t._v(" Commit ")])],1)],1),n("v-row",[n("v-col",{staticClass:"md-2"},[n("v-checkbox",{attrs:{label:"Drone?"},model:{value:t.options.drone,callback:function(e){t.$set(t.options,"drone",e)},expression:"options.drone"}})],1),n("v-col",{staticClass:"md-2"},[n("v-select",{attrs:{label:"Reference",items:t.numberedNoteDropdownOptions},model:{value:t.referenceNote,callback:function(e){t.referenceNote=e},expression:"referenceNote"}})],1),n("v-col",{staticClass:"md-2"},[n("v-select",{attrs:{label:"Tonic",items:t.numberedNoteDropdownOptions},model:{value:t.tonic,callback:function(e){t.tonic=e},expression:"tonic"}})],1),n("v-col",{staticClass:"md-2"},[n("v-select",{attrs:{label:"Lowest Root",items:t.numberedNoteDropdownOptions},model:{value:t.lowestRoot,callback:function(e){t.lowestRoot=e},expression:"lowestRoot"}})],1),n("v-col",{staticClass:"md-4"},[n("v-checkbox",{attrs:{label:"Tonicize and Deduplicate?"},model:{value:t.options.tonicizeAndDeduplicate,callback:function(e){t.$set(t.options,"tonicizeAndDeduplicate",e)},expression:"options.tonicizeAndDeduplicate"}})],1)],1),n("v-row",[n("v-col",{staticClass:"md-2"},[n("v-checkbox",{attrs:{label:"Arpeggiate Chords?"},model:{value:t.options.arpeggiateChords,callback:function(e){t.$set(t.options,"arpeggiateChords",e)},expression:"options.arpeggiateChords"}})],1),n("v-col",{staticClass:"md-2"},[n("v-text-field",{attrs:{label:"Card Chunk Size"},model:{value:t.options.cardChunkSize,callback:function(e){t.$set(t.options,"cardChunkSize",t._n(e))},expression:"options.cardChunkSize"}})],1),n("v-col",{staticClass:"md-8"})],1),n("v-row",[n("v-col",{staticClass:"md-2"},[n("v-text-field",{attrs:{label:"Percent New"},model:{value:t.options.priorities.percentNew,callback:function(e){t.$set(t.options.priorities,"percentNew",t._n(e))},expression:"options.priorities.percentNew"}})],1),n("v-col",{staticClass:"md-2"},[n("v-text-field",{attrs:{label:"Percentiles"},model:{value:t.byPercentilesString,callback:function(e){t.byPercentilesString=e},expression:"byPercentilesString"}})],1),n("v-col",{staticClass:"md-8"})],1)],1)},x=[],I=(n("ac1f"),n("1276"),n("5530")),S=n("2909"),R=n("b974"),N=n("ac7c"),E=n("8654"),P=n("8336"),T={drone:!0,referenceNote:{kind:"scientific",class:"A",octave:3},tonic:{kind:"scientific",class:"A",octave:3},lowestRoot:{kind:"scientific",class:"F#",octave:2},tonicizeAndDeduplicate:!1,arpeggiateChords:!1,cardChunkSize:1,priorities:{percentNew:40,byPercentiles:[50,30,20]}},D=(n("25f0"),n("5e54")),V=["A","Bb","B","C","Db","D","Eb","E","F","F#","G","Ab"];function F(t,e){var n=[];return t.forEach((function(t){e(t).forEach((function(t){return n.push(t)}))})),n}var A=F([1,2,3,4,5,6,7,8],(function(t){return V.map((function(e){return e+t.toString()}))}));function M(t){return"midi"==t.kind?t.midi:"scientific"==t.kind?Object(D["a"])(t.class+t.octave.toString()).toMidi():U(t.solfege.solfege)+12*t.solfege.octaveOffset+M(t.tonic)}function U(t){return"do"==t?0:"ra"==t?1:"re"==t?2:"ri"==t||"me"==t?3:"mi"==t?4:"fa"==t?5:"fi"==t||"se"==t?6:"so"==t?7:"si"==t||"le"==t?8:"la"==t?9:"li"==t||"te"==t?10:"ti"==t?11:-1}function z(t){if(-1==U(t))throw console.log("Not valid solfege: "+t),new Error("Invalid solfege: "+t);return t}function L(t){var e=-1,n=0,i=[];return t.forEach((function(t){var r,o=null!==(r=U(t))&&void 0!==r?r:0;while(o+12*n<=e)n++;var a=o+12*n;e=a,i.push({solfege:t,octaveOffset:n})})),i}var B=function(t){Object(l["a"])(n,t);var e=Object(u["a"])(n);function n(){var t;return Object(s["a"])(this,n),t=e.apply(this,arguments),t.numberedNoteDropdownOptions=Object(S["a"])(A),t.options=Object(I["a"])(Object(I["a"])({},T),{},{priorities:Object(I["a"])({},T.priorities)}),t.referenceNote="A3",t.lowestRoot="F2",t.tonic="A3",t.byPercentilesString="50 30 20",t}return Object(c["a"])(n,[{key:"byPercentilesChanged",value:function(t){this.options.priorities.byPercentiles=t.split(" ").map((function(t){return parseInt(t)}))}},{key:"referenceNoteChanged",value:function(t){this.options.referenceNote=this.stringToScientificNote(t)}},{key:"lowestRootChanged",value:function(t){this.options.lowestRoot=this.stringToScientificNote(t)}},{key:"tonicChanged",value:function(t){this.options.tonic=this.stringToScientificNote(t)}},{key:"stringToScientificNote",value:function(t){var e=t.substring(0,t.length-1),n=parseInt(t.substring(t.length-1,t.length));return{kind:"scientific",class:e,octave:n}}},{key:"emit",value:function(){return this.options}}]),n}(f["d"]);Object(d["a"])([Object(f["e"])("byPercentilesString")],B.prototype,"byPercentilesChanged",null),Object(d["a"])([Object(f["e"])("referenceNote")],B.prototype,"referenceNoteChanged",null),Object(d["a"])([Object(f["e"])("lowestRoot")],B.prototype,"lowestRootChanged",null),Object(d["a"])([Object(f["e"])("tonic")],B.prototype,"tonicChanged",null),Object(d["a"])([Object(f["b"])("input")],B.prototype,"emit",null),B=Object(d["a"])([Object(f["a"])({components:{VContainer:g["a"],VRow:m["a"],VCol:b["a"],VSelect:R["a"],VCheckbox:N["a"],VTextField:E["a"],VBtn:P["a"]}})],B);var $=B,G=$,Y=Object(C["a"])(G,j,x,!1,null,null,null),J=Y.exports,q=n("7496"),H=n("f6c4"),K=n("fe57"),Q=n("71a3"),W=n("c671"),X=(n("99af"),[{function:"I",inv:"R 3 5",category:"triads.diatonic.major",notes:"do mi so"},{function:"ii",inv:"R 3 5",category:"triads.diatonic.major",notes:"re fa la"},{function:"iii",inv:"R 3 5",category:"triads.diatonic.major",notes:"mi so ti"},{function:"IV",inv:"R 3 5",category:"triads.diatonic.major",notes:"fa la do"},{function:"V",inv:"R 3 5",category:"triads.diatonic.major",notes:"so ti re"},{function:"vi",inv:"R 3 5",category:"triads.diatonic.major",notes:"la do mi"},{function:"vii b5",inv:"R 3 5",category:"triads.diatonic.major",notes:"ti re fa"}]),Z=[{function:"i",inv:"R 3 5",category:"triads.diatonic.minor",notes:"do me so"},{function:"ii b5",inv:"R 3 5",category:"triads.diatonic.minor",notes:"re fa le"},{function:"bIII",inv:"R 3 5",category:"triads.diatonic.minor",notes:"me so te"},{function:"iv",inv:"R 3 5",category:"triads.diatonic.minor",notes:"fa le do"},{function:"v",inv:"R 3 5",category:"triads.diatonic.minor",notes:"so te re"},{function:"bVI",inv:"R 3 5",category:"triads.diatonic.minor",notes:"le do me"},{function:"bVII",inv:"R 3 5",category:"triads.diatonic.minor",notes:"te re fa"}],tt=[{function:"do",inv:"do",category:"singlets",notes:"do"},{function:"ra",inv:"ra",category:"singlets",notes:"ra"},{function:"re",inv:"re",category:"singlets",notes:"re"},{function:"ri/me",inv:"ri/me",category:"singlets",notes:"me"},{function:"mi",inv:"mi",category:"singlets",notes:"mi"},{function:"fa",inv:"fa",category:"singlets",notes:"fa"},{function:"fi/se",inv:"fi/se",category:"singlets",notes:"fi"},{function:"so",inv:"so",category:"singlets",notes:"so"},{function:"si/le",inv:"si/le",category:"singlets",notes:"le"},{function:"la",inv:"la",category:"singlets",notes:"la"},{function:"li/te",inv:"li/te",category:"singlets",notes:"te"},{function:"ti",inv:"ti",category:"singlets",notes:"ti"}],et=X.concat(Z).concat(tt);function nt(t){var e=L(t.notes.split(" ").map(z));return{id:t.function+" : "+t.inv,function:t.function,inversion:t.inv,category:t.category.split("."),notes:e,kind:"chord"}}n("a630"),n("6062");function it(t){var e=new Map;t.forEach((function(t){var n="";t.category.forEach((function(i,r){var o=""==n?i:n+"."+i;if(!e.has(o)){var a={id:o,name:i,children:[]};if(e.set(o,a),e.has(n)){var s=e.get(n);s.children.push(a)}}if(r==t.category.length-1){var c={id:t.id,name:t.id},l=e.get(o);l.children.push(c)}n=o}))}));var n=new Set(t.map((function(t){return t.category[0]}))),i=Array.from(n).map((function(t){return e.get(t)}));return i}function rt(t){return it(t.map((function(t){return{id:t.id,category:t.category}})))}n("4de4");var ot=function(){function t(e,n){var i=this;Object(s["a"])(this,t),this._lastCard="",this._newCards=Object(S["a"])(e),ft(this._newCards),this._priorities=n,this._attempts=[],this._flashcardToIndex=new Map,this._newCards.forEach((function(t,e){return i._flashcardToIndex.set(t,{kind:"new",index:e})}))}return Object(c["a"])(t,[{key:"resetPriorities",value:function(t){this._priorities=t}},{key:"drawCard",value:function(){var t=this;try{return this._attempts.length<=this._priorities.byPercentiles.length&&this._newCards.length>0?this.drawNewCard():0==this._newCards.length?this.drawAttemptedCard():lt([[this._priorities.percentNew,function(){return t.drawNewCard()}],[100-this._priorities.percentNew,function(){return t.drawAttemptedCard()}]])}catch(e){return console.log("Big mess up trying to draw a card: "+e),""}}},{key:"drawAttemptedCard",value:function(){return st(this._priorities.byPercentiles,this._attempts).flashcardId}},{key:"drawNewCard",value:function(){return this._newCards[this._newCards.length-1]}},{key:"recordAttempt",value:function(t,e){var n=this._flashcardToIndex.get(t);if(console.log(n),"attempted"==(null===n||void 0===n?void 0:n.kind)){var i=this._attempts[n.index];i.totalTries++,i.successful+=e?1:0,i.failed+=e?0:1,at(this._attempts,n.index,this._flashcardToIndex)}else if("new"==(null===n||void 0===n?void 0:n.kind)){if(n.index!=this._newCards.length-1)throw console.log("Invariant that new cards are always the last in the deck violated."),new Error("Invariant that new cards are always the last in the deck violated.");this._newCards.pop(),this._attempts.push({flashcardId:t,successful:e?1:0,failed:e?0:1,totalTries:1}),this._flashcardToIndex.set(t,{kind:"attempted",index:this._attempts.length-1}),at(this._attempts,this._attempts.length-1,this._flashcardToIndex)}}},{key:"resetFlashcards",value:function(t){var e=this,n=new Set(t),i=new Set;this._newCards.forEach((function(t){return i.add(t)})),this._attempts.forEach((function(t){return i.add(t.flashcardId)}));var r=Object(S["a"])(n).filter((function(t){return!i.has(t)}));this._newCards=this._newCards.filter((function(t){return n.has(t)})),this._attempts=this._attempts.filter((function(t){return n.has(t.flashcardId)})),this._newCards=this._newCards.concat(Object(S["a"])(r)),ft(this._newCards),this._flashcardToIndex=new Map,this._newCards.forEach((function(t,n){return e._flashcardToIndex.set(t,{kind:"new",index:n})})),this._attempts.forEach((function(t,n){return e._flashcardToIndex.set(t.flashcardId,{kind:"attempted",index:n})}))}}]),t}();function at(t,e,n){var i=function(t){return t.successful*t.successful/t.totalTries},r=function(t,e){return i(t)<i(e)},o=function(t,e){return i(t)>i(e)};function a(t,e,i){n.get(t[e].flashcardId).index=i,n.get(t[i].flashcardId).index=e;var r=t[e];t[e]=t[i],t[i]=r}function s(t,e){while(e>0&&r(t[e],t[e-1]))a(t,e,e-1),e--}function c(t,e){while(e<t.length-1&&o(t[e],t[e+1]))a(t,e,e+1),e++}c(t,e),s(t,e)}function st(t,e){var n=t.length,i=dt(e,n);return lt(t.map((function(t,n){return[t,function(){return e[ut(i[n][0],i[n][1])]}]})))}function ct(t){var e=[],n=0;return t.forEach((function(t){e.push((n+t)/100),n+=t})),e}function lt(t){var e=ct(t.map((function(t){return t[0]})));if(1!=e[e.length-1])throw console.log("Probabilities don't add up to 1"),console.log(t),new Error("Probabilities don't add up to 1.");var n=Math.random(),i=0;while(n>e[i])i++;return t[i][1]()}function ut(t,e){return Math.floor(Math.random()*(e-t+1)+t)}function dt(t,e){for(var n=t.length/e,i=n%1==0,r=Math.ceil(n),o=[],a=0,s=r-1,c=0;c<e;c++){var l=Math.min(s,t.length-1);a<=l&&o.push([a,l]),a=l+1,s=l+(r-(c%2!=0||i?0:1))}if(o.length<e){o.reverse();while(o.length<e)o.push(o[o.length-1]);o.reverse()}return o}function ft(t){for(var e=t.length-1;e>0;e--){var n=Math.floor(Math.random()*(e+1)),i=[t[n],t[e]];t[e]=i[0],t[n]=i[1]}}var ht=n("af81"),pt=function(){function t(){Object(s["a"])(this,t),this._piano=new ht["a"]}return Object(c["a"])(t,[{key:"load",value:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(D["m"])();case 3:return t.next=5,D["i"].resume();case 5:return t.next=7,this._piano.context.resume();case 7:return this._piano.toDestination(),t.next=10,this._piano.load();case 10:return console.log("Piano load successful."),t.abrupt("return",!0);case 14:return t.prev=14,t.t0=t["catch"](0),console.log(t.t0),t.abrupt("return",!1);case 18:case"end":return t.stop()}}),t,this,[[0,14]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"playChord",value:function(t,e,n){var i=this,r=function(t){return"+"+Math.floor(t).toString()},o=t.map(M),a=n?M(n):void 0,s=r(n?e:0),c=r(n?2*e:e);a?(this._piano.keyDown({midi:a}),this._piano.keyUp({midi:a,time:s}),o.forEach((function(t){return i._piano.keyDown({midi:t,time:s})})),o.forEach((function(t){return i._piano.keyUp({midi:t,time:c})}))):(o.forEach((function(t){return i._piano.keyDown({midi:t})})),o.forEach((function(t){return i._piano.keyUp({midi:t,time:c})})))}}]),t}(),vt=(n("a623"),n("13d5"),function(){function t(e,n){Object(s["a"])(this,t),this._target=[],this._failedYet=!1,this._input=[],this._batchSizes=[],this._maxInputLength=0,this._config=e,this._emit=n}return Object(c["a"])(t,[{key:"setConfig",value:function(t){this._config=t}},{key:"setEmit",value:function(t){this._emit=t}},{key:"resetTarget",value:function(t){this._target=t.map((function(t){return t.map(M)})),this._failedYet=!1,this._input=[],this._batchSizes=t.map((function(t){return t.length})),this._maxInputLength=this._batchSizes.reduce((function(t,e){return t+e}),0)}},{key:"accept",value:function(t){if(t==this._config.giveUp)this._emit({kind:"giveUp"});else if(t==this._config.nextCard)this._emit({kind:"nextCard"});else if(t==this._config.replay)this._emit({kind:"replay"});else if(this._input.push(t),this._input.length<this._maxInputLength);else{this._input.length>this._maxInputLength&&this._input.shift();var e=gt(this._input,this._batchSizes);mt(e,this._target)?this._emit({kind:"rightAnswer",onFirstGuess:!this._failedYet}):this._failedYet=!0}}}]),t}());function gt(t,e){var n=[],i=0;return e.forEach((function(e){for(var r=[],o=0;o<e&&i<t.length;o++)r.push(t[i++]);n.push(r)})),n}function mt(t,e){function n(t,e){var n=new Set(t);return t.length==e.length&&e.every((function(t){return n.has(t)}))}if(t.length!=e.length)return!1;for(var i=0;i<t.length;i++)if(!n(t[i],e[i]))return!1;return!0}var bt=n("c62b"),yt=n.n(bt),wt=function(t){Object(l["a"])(n,t);var e=Object(u["a"])(n);function n(){var t;return Object(s["a"])(this,n),t=e.apply(this,arguments),t.options=T,t.chords=et.map(nt),t.categories=rt(t.chords),t.selectedFlashcardIds=[],t.cardDrawer=new ot(t.selectedFlashcardIds,t.options.priorities),t.player=void 0,t.midiBatcher=new vt({giveUp:M({kind:"scientific",class:"Ab",octave:7}),replay:M({kind:"scientific",class:"F#",octave:7}),nextCard:M({kind:"scientific",class:"Bb",octave:7})},(function(t){return console.log("got midi event, not sure what to do with it yet.")})),t.pianoLoaded=!1,t.practiceState={currentCardId:"",wrongGuesses:0,giveUp:!1},t}return Object(c["a"])(n,[{key:"optionsChanged",value:function(t){this.cardDrawer.resetPriorities(t.priorities)}},{key:"selectedFlashcardIdsChanged",value:function(t){this.cardDrawer.resetFlashcards(t)}},{key:"loadPiano",value:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.player=new pt,t.next=3,this.player.load();case 3:this.pianoLoaded=!0,yt.a.enable((function(t){void 0!=t?console.log("Error trying to setup midi listener: "+t.name):console.log("Successfully set up midi listner."),console.log(yt.a.inputs),console.log(yt.a.outputs),0==yt.a.inputs.length&&console.log("No midi input device detected.");var n=yt.a.inputs[0];n.addListener("noteon","all",(function(t){e.midiBatcher.accept(t.note.number)}))}),!0),this.midiBatcher.setEmit((function(t){"giveUp"==t.kind?e.giveUp():"replay"==t.kind?e.playCard():"nextCard"==t.kind?(e.recordResult(!1),e.drawCard(),e.playCard()):"rightAnswer"==t.kind&&(e.recordResult(t.onFirstGuess),e.drawCard(),e.playCard())})),this.drawCard(),this.playCard();case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"drawCard",value:function(){var t=this;try{this.practiceState={currentCardId:this.cardDrawer.drawCard(),wrongGuesses:0,giveUp:!1};var e=this.currentCard,n=e.notes.map((function(e){return{kind:"solfege",solfege:e,tonic:t.options.tonic}}));this.midiBatcher.resetTarget([n])}catch(i){console.log(i)}}},{key:"recordResult",value:function(t){try{this.cardDrawer.recordAttempt(this.practiceState.currentCardId,t),this.drawCard()}catch(e){console.log(e)}}},{key:"playCard",value:function(){var t=this,e=this.currentCard;if(e&&"chord"==e.kind){var n=e.notes.map((function(e){return{kind:"solfege",solfege:e,tonic:t.options.tonic}}));console.log(n),this.player.playChord(n,1,this.options.referenceNote)}}},{key:"giveUp",value:function(){this.practiceState.giveUp=!0}},{key:"chordsbyId",get:function(){var t=new Map;return this.chords.forEach((function(e){return t.set(e.id,e)})),t}},{key:"currentCard",get:function(){return this.chordsbyId.get(this.practiceState.currentCardId)}},{key:"currentCardDescription",get:function(){return void 0==this.currentCard?"":"chord"==this.currentCard.kind?this.currentCard.function+" "+this.currentCard.inversion+" : "+this.currentCard.notes.map((function(t){return t.solfege})).join(", "):this.currentCard.notes.join(", ")}}]),n}(f["d"]);Object(d["a"])([Object(f["e"])("options",{deep:!0})],wt.prototype,"optionsChanged",null),Object(d["a"])([Object(f["e"])("selectedFlashcardIds",{deep:!0})],wt.prototype,"selectedFlashcardIdsChanged",null),wt=Object(d["a"])([Object(f["a"])({components:{FlashcardSelector:O,OptionsEditor:J,VApp:q["a"],VMain:H["a"],VTabs:K["a"],VTab:Q["a"],VTabItem:W["a"],VContainer:g["a"],VRow:m["a"],VCol:b["a"],VBtn:P["a"]}})],wt);var _t=wt,Ct=_t,kt=(n("5c0b"),Object(C["a"])(Ct,r,o,!1,null,null,null)),Ot=kt.exports,jt=n("2f62");i["a"].use(jt["a"]);var xt=new jt["a"].Store({state:{},mutations:{},actions:{},modules:{}}),It=n("f309"),St=(n("bf40"),new It["a"]({}));i["a"].use(It["a"]),i["a"].config.productionTip=!1,new i["a"]({vuetify:St,store:xt,render:function(t){return t(Ot)}}).$mount("#app")}});
//# sourceMappingURL=app.8bb7c750.js.map